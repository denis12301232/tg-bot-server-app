var h=(s,e,o)=>new Promise((r,i)=>{var c=n=>{try{a(o.next(n))}catch(u){i(u)}},t=n=>{try{a(o.throw(n))}catch(u){i(u)}},a=n=>n.done?r(n.value):Promise.resolve(n.value).then(c,t);a((o=o.apply(s,e)).next())});import{M as U,C as j,d as V,o as B,N as K,b as f,e as l,t as w,f as _,G as I,K as b,g as p,n as k,O as R,a as m,_ as E,r as v,c as G,u as H,h as O,v as C,j as $,F as x,k as z,H as J,p as Q,q as X,i as Y,V as Z,P as ee}from"./index.0ed9803e.js";class te{static getImages(e){return U.get(`${j.API_URL}/images/`,{params:{pageToken:e}})}}const ae={class:"image-modal"},ne={class:"image-count"},se={class:"modal-content"},oe=["src"],le={class:"image-description"},ie=V({__name:"ImageModal",props:{link:{type:String,required:!0},description:{type:String,default:""},current:{type:Number,default:0},total:{type:Number,default:0}},emits:["close","prev","next"],setup(s,{emit:e}){B(()=>{document.addEventListener("keyup",c),document.addEventListener("keydown",i)}),K(()=>{document.removeEventListener("keyup",c),document.removeEventListener("keydown",i)});const o=R("isImageLoading");function r(){o.value=!1}function i(t){t.key==="ArrowLeft"?e("prev"):t.key==="ArrowRight"&&e("next")}function c(t){t.key==="Escape"&&e("close")}return(t,a)=>{const n=k("ButtonImage"),u=k("LoadingWheel");return m(),f("div",ae,[l("div",ne,w(s.current+1+"/"+s.total),1),_(n,{class:"close-window",image:"close.png",onClick:a[0]||(a[0]=g=>e("close")),invert:!1}),_(n,{class:"right-arrow",image:"arrow-left.png",onClick:a[1]||(a[1]=g=>e("prev")),invert:!1}),_(n,{class:"left-arrow",image:"arrow-right.png",onClick:a[2]||(a[2]=g=>e("next")),invert:!1}),l("div",se,[I(_(u,null,null,512),[[b,p(o)]]),I(l("img",{src:s.link,onLoad:r},null,40,oe),[[b,!p(o)]]),l("div",le,w(s.description),1)])])}}});const ce=E(ie,[["__scopeId","data-v-d34a81b8"]]),N=s=>(Q("data-v-bdc15df9"),s=s(),X(),s),ue=N(()=>l("h1",{class:"title"},"\u0413\u0430\u043B\u0435\u0440\u0435\u044F",-1)),re={class:"images"},de=["onClick"],ve=["src"],ge=N(()=>l("div",{class:"image-hover"},null,-1)),me={class:"loading"},_e={class:"observer"},pe=V({__name:"ImagesView",setup(s){const e=v([]),o=v(!1),r=v(""),i=v(!1),c=v(0),t=v(0),a=v(),n=G(()=>Z.required(a.value||"")&&!g.value),{fetchFunc:u,isLoading:g}=H({callback:S,alert:!1});ee("isImageLoading",i),B(u);function S(){return h(this,null,function*(){const d=yield te.getImages(a.value);e.value=[...e.value,...d.data.images],a.value=d.data.pageToken,c.value+=d.data.images.length})}function D(){o.value=!1}function F(d){i.value=!0,r.value=e.value[d].link,t.value=d,o.value=!0}function M(){return h(this,null,function*(){if(!g.value){if(t.value+1>=c.value&&a.value)yield u();else if(t.value+1>=c.value)return;t.value++,i.value=!0,r.value=e.value[t.value].link}})}function W(){t.value-1<0||(t.value--,i.value=!0,r.value=e.value[t.value].link)}return(d,y)=>{const q=k("v-btn"),A=k("LoadingWheel"),P=J("intersection");return m(),f(x,null,[_(q,{class:"home",onClick:y[0]||(y[0]=L=>d.$router.push("/"))},{default:O(()=>[Y("\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E")]),_:1}),o.value?(m(),C(ce,{key:0,link:r.value,total:c.value,current:t.value,onClose:D,onNext:M,onPrev:W},null,8,["link","total","current"])):$("",!0),ue,l("div",re,[(m(!0),f(x,null,z(e.value,(L,T)=>(m(),f("div",{class:"image-block",onClick:fe=>F(T)},[l("img",{src:L.link},null,8,ve),ge],8,de))),256))]),l("div",me,[p(g)?(m(),C(A,{key:0})):$("",!0)]),l("div",_e,[I(l("div",null,null,512),[[P,{f:p(u),canLoad:()=>p(n)}]])])],64)}}});const Ie=E(pe,[["__scopeId","data-v-bdc15df9"]]);export{Ie as default};
