System.register(["./useFetching-legacy-45869584.js","./useNavigation-legacy-35688046.js","./axios-legacy-f3f8b04f.js","./index-legacy-3c4dcd94.js","./@vue-legacy-f472956d.js","./vue-router-legacy-1eca3dbd.js","./form-data-legacy-e95b16df.js","./pinia-legacy-049720e3.js","./vue-demi-legacy-14d04f86.js","./vuetify-legacy-5de5351e.js","./@mdi-legacy-4c0fdc7d.js","./core-js-legacy-a73dc4e0.js"],(function(e,a){"use strict";var t,i,o,n,l,r,s,c,d,u,g,m,v,f,p,b,k,y,h,x,w,j,L,_,C,I,E,z,A,N,V,F=document.createElement("style");return F.textContent=".image-modal[data-v-d34a81b8]{position:fixed;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.836);z-index:9999;display:flex}.image-modal>.modal-content[data-v-d34a81b8]{margin:auto;max-width:800px;position:relative;user-select:none}.image-modal>.modal-content>.image-description[data-v-d34a81b8]{position:absolute;bottom:0;left:50%;margin-right:-50%;transform:translate(-50%)}.image-modal>.close-window[data-v-d34a81b8]{position:absolute;right:5px;top:5px;z-index:1}.image-modal>.right-arrow[data-v-d34a81b8]{position:absolute;top:50%;transform:translateY(-50%);left:5px;z-index:1}.image-modal>.left-arrow[data-v-d34a81b8]{position:absolute;top:50%;transform:translateY(-50%);right:5px;z-index:1}.image-modal>.image-count[data-v-d34a81b8]{position:absolute;left:5px;top:5px;color:var(--water-color);font-size:1.2em;font-weight:700}.home[data-v-5f8c6f47]{margin-left:10px;margin-top:10px}.observer[data-v-5f8c6f47]{padding:1px;bottom:0px}.title[data-v-5f8c6f47]{text-align:center;font-weight:700;font-size:3rem;text-transform:uppercase;letter-spacing:.01em;padding:20px 0;margin:0}.loading[data-v-5f8c6f47]{display:flex;justify-content:center}.images[data-v-5f8c6f47]{display:grid;grid-template-columns:repeat(4,1fr);gap:4px;padding:0 10px 20px}.images .image-block[data-v-5f8c6f47]{overflow:hidden;position:relative;cursor:pointer;-webkit-tap-highlight-color:transparent}.images .image-block>.image-hover[data-v-5f8c6f47]{position:absolute;top:0;bottom:0;right:0;left:0;background-color:rgba(0,0,0,.7);opacity:0}.images .image-block>img[data-v-5f8c6f47]{transform:scale(1);transition:transform 3s;object-fit:cover;height:100%;width:100%}.images .image-block:hover>img[data-v-5f8c6f47]{transform:scale(1.1)}.images .image-block:hover>.image-hover[data-v-5f8c6f47]{opacity:1}@media (max-width: 768px){.images[data-v-5f8c6f47]{grid-template-columns:repeat(2,1fr)}}\n",document.head.appendChild(F),{setters:[e=>{t=e.u},e=>{i=e.u},e=>{o=e.a},e=>{n=e.C,l=e._,r=e.V},e=>{s=e.j,c=e.E,d=e.A,u=e.U,g=e.X,m=e.Z,v=e.y,f=e.I,p=e.K,b=e.u,k=e.$,y=e.c,h=e.W,x=e.r,w=e.h,j=e._,L=e.a5,_=e.V,C=e.F,I=e.a4,E=e.J,z=e.a7,A=e.a8,N=e.Q,V=e.p},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){class a{static getImages(e){return o.get(`${n.API_V1}/images/`,{params:{pageToken:e}})}}const F={class:"image-modal"},S={class:"image-count"},W={class:"modal-content"},q=["src"],B={class:"image-description"},P=l(s({__name:"ImageModal",props:{link:{type:String,required:!0},description:{type:String,default:""},current:{type:Number,default:0},total:{type:Number,default:0}},emits:["close","prev","next"],setup(e,{emit:a}){c((()=>{document.addEventListener("keyup",n),document.addEventListener("keydown",o)})),d((()=>{document.removeEventListener("keyup",n),document.removeEventListener("keydown",o)}));const t=y("isImageLoading");function i(){t.value=!1}function o(e){"ArrowLeft"===e.key?a("prev"):"ArrowRight"===e.key&&a("next")}function n(e){"Escape"===e.key&&a("close")}return(o,n)=>{const l=k("ButtonImage"),r=k("LoadingWheel");return h(),u("div",F,[g("div",S,m(e.current+1+"/"+e.total),1),v(l,{class:"close-window",image:"close.png",onClick:n[0]||(n[0]=e=>a("close")),invert:!1}),v(l,{class:"right-arrow",image:"arrow-left.png",onClick:n[1]||(n[1]=e=>a("prev")),invert:!1}),v(l,{class:"left-arrow",image:"arrow-right.png",onClick:n[2]||(n[2]=e=>a("next")),invert:!1}),g("div",W,[f(v(r,null,null,512),[[p,b(t)]]),f(g("img",{src:e.link,onLoad:i},null,40,q),[[p,!b(t)]]),g("div",B,m(e.description),1)])])}}}),[["__scopeId","data-v-d34a81b8"]]),T=e=>(z("data-v-5f8c6f47"),e=e(),A(),e),Y=T((()=>g("h1",{class:"title"},"Галерея",-1))),$={class:"images"},J=["onClick"],K=["src"],M=T((()=>g("div",{class:"image-hover"},null,-1))),Q={class:"loading"},R={class:"observer"};e("default",l(s({__name:"ImagesView",setup(e){const{goBack:o}=i(),n=x([]),l=x(!1),s=x(""),d=x(!1),m=x(0),p=x(0),y=x(),z=w((()=>r.required(y.value||"")&&!F.value)),{fetchFunc:A,isLoading:F}=t({callback:async function(){const e=await a.getImages(y.value);n.value=[...n.value,...e.data.images],y.value=e.data.pageToken,m.value+=e.data.images.length},alert:!1});function S(){l.value=!1}async function W(){if(!F.value){if(p.value+1>=m.value&&y.value)await A();else if(p.value+1>=m.value)return;p.value++,d.value=!0,s.value=n.value[p.value].link}}function q(){p.value-1<0||(p.value--,d.value=!0,s.value=n.value[p.value].link)}return V("isImageLoading",d),c(A),(e,a)=>{const t=k("v-btn"),i=k("LoadingWheel"),r=E("intersection");return h(),u(C,null,[v(t,{class:"home",onClick:b(o)},{default:j((()=>[N("Назад")])),_:1},8,["onClick"]),l.value?(h(),L(P,{key:0,link:s.value,total:m.value,current:p.value,onClose:S,onNext:W,onPrev:q},null,8,["link","total","current"])):_("",!0),Y,g("div",$,[(h(!0),u(C,null,I(n.value,((e,a)=>(h(),u("div",{class:"image-block",onClick:e=>function(e){d.value=!0,s.value=n.value[e].link,p.value=e,l.value=!0}(a)},[g("img",{src:e.link},null,8,K),M],8,J)))),256))]),g("div",Q,[b(F)?(h(),L(i,{key:0})):_("",!0)]),g("div",R,[f(g("div",null,null,512),[[r,{f:b(A),canLoad:()=>b(z)}]])])],64)}}}),[["__scopeId","data-v-5f8c6f47"]]))}}}));
