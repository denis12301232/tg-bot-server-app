System.register(["./index-legacy-3c4dcd94.js","./TheError-legacy-554c174f.js","./@vue-legacy-f472956d.js","./useNavigation-legacy-35688046.js","./useFetching-legacy-45869584.js","./ToolsService-legacy-27fea034.js","./AssistanceService-legacy-a8c3c71c.js","./pinia-legacy-049720e3.js","./vue-demi-legacy-14d04f86.js","./vuetify-legacy-5de5351e.js","./axios-legacy-f3f8b04f.js","./form-data-legacy-e95b16df.js","./vue-router-legacy-1eca3dbd.js","./@mdi-legacy-4c0fdc7d.js","./core-js-legacy-a73dc4e0.js"],(function(e,l){"use strict";var a,t,s,i,o,d,n,c,r,u,v,m,h,p,b,f,_,g,x,y,w,V,k,C,U,I,j,T,S,L,F,K,P,R=document.createElement("style");return R.textContent=".google[data-v-6b80d342]{padding:10px 0}.filter_container>.filter_content[data-v-bc947ab1]{border:2px solid #738095;box-shadow:inset 0 0 2px rgba(207,215,230,.4);border-radius:5px;padding:5px}.filter_container>.filter_content>.filter_item[data-v-bc947ab1]{padding:3px 0;display:flex}.filter_container>.filter_content>.filter_item>.item_title[data-v-bc947ab1]{flex-basis:100px}.filter_container .filter_title[data-v-bc947ab1]{padding:10px 0}.buttons[data-v-bc947ab1]{display:flex;padding:10px 0}.sheets_link[data-v-bc947ab1]{display:inline-block;color:#208f47;text-decoration:none;font-weight:bolder;cursor:pointer}.sheets_link[data-v-bc947ab1]:visited{color:#208f47}.sheets_link[data-v-bc947ab1]:hover,.sheets_link[data-v-bc947ab1]:focus{color:#c4433a}.loader[data-v-1285b9d7]{display:flex;flex-direction:column;align-items:center;width:100%;padding-top:10px}.content[data-v-1285b9d7]{width:100%;padding-top:10px;padding-bottom:5px}.content .search[data-v-1285b9d7]{min-width:250px}.content .user_list[data-v-1285b9d7]{border-spacing:3px;margin-top:5px;background-color:inherit;border-collapse:collapse;border-radius:2px;border-style:hidden;box-shadow:0 0 0 1.5px #738095;width:100%;table-layout:fixed;min-width:250px}.content .user_list td[data-v-1285b9d7],.content .user_list th[data-v-1285b9d7]{border:solid 1px #ccc;padding:10px;border-radius:10px;overflow:auto;word-wrap:break-word}.content .user_list .list_row .row_item[data-v-1285b9d7]{vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles[data-v-1285b9d7]{display:flex;place-items:center}.roles>.role_name[data-v-1285b9d7]{flex-basis:90%;display:block;min-width:50px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles>.role_set[data-v-1285b9d7]{flex-basis:10%;min-width:30px}@media (max-width: 768px){.content[data-v-1285b9d7],.loader[data-v-1285b9d7]{width:100%;margin:0 auto}}.home_button[data-v-af500cc2]{margin:10px 0 0 10px}.tools[data-v-af500cc2]{margin:0 auto;width:90%}.tools .title[data-v-af500cc2]{padding:20px 0}.tools .tools_list[data-v-af500cc2]{padding-bottom:5px;width:50%}.tools .tools_list .list_item .item_title[data-v-af500cc2]{user-select:none}.tools .tools_list .list_item .item_title[data-v-af500cc2]:hover{cursor:pointer;color:teal}.selected[data-v-af500cc2]{color:teal}@media (max-width: 768px){.tools .tools_list[data-v-af500cc2]{width:100%}}\n",document.head.appendChild(R),{setters:[e=>{a=e._,t=e.u,s=e.C},e=>{i=e.default},e=>{o=e.j,d=e.a,n=e.h,c=e.$,r=e.W,u=e.U,v=e.y,m=e.X,h=e._,p=e.Q,b=e.u,f=e.a5,_=e.V,g=e.Z,x=e.a2,y=e.r,w=e.w,V=e.F,k=e.a4,C=e.I,U=e.K,I=e.a7,j=e.a8,T=e.E,S=e.Y},e=>{L=e.u},e=>{F=e.u},e=>{K=e.T},e=>{P=e.A},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const l={class:"google_control"},R={class:"google_message"},A=a(o({__name:"TheToolsGoogle",setup(e){const a=d({serviceUser:"",servicePrivateKey:"",sheetId:"",folderId:"",message:""}),t=n((()=>!(a.serviceUser||a.servicePrivateKey||a.sheetId||a.folderId))),{fetchFunc:s,isLoading:i}=F({callback:async function(){await K.setGoogleServiceAccountSettings(a.serviceUser,a.servicePrivateKey,a.sheetId,a.folderId),a.serviceUser="",a.servicePrivateKey="",a.sheetId="",a.folderId=""},successMessage:"Сохранено"});return(e,o)=>{const d=c("v-text-field"),n=c("v-btn"),y=c("LoadingWheel");return r(),u("form",{class:"google",onSubmit:o[4]||(o[4]=x(((...e)=>b(s)&&b(s)(...e)),["prevent"]))},[v(d,{modelValue:a.serviceUser,"onUpdate:modelValue":o[0]||(o[0]=e=>a.serviceUser=e),variant:"outlined",label:"Service account email"},null,8,["modelValue"]),v(d,{modelValue:a.servicePrivateKey,"onUpdate:modelValue":o[1]||(o[1]=e=>a.servicePrivateKey=e),variant:"outlined",label:"Service account private key"},null,8,["modelValue"]),v(d,{modelValue:a.sheetId,"onUpdate:modelValue":o[2]||(o[2]=e=>a.sheetId=e),variant:"outlined",label:"Sheet ID"},null,8,["modelValue"]),v(d,{modelValue:a.folderId,"onUpdate:modelValue":o[3]||(o[3]=e=>a.folderId=e),variant:"outlined",label:"Folder ID"},null,8,["modelValue"]),m("div",l,[v(n,{type:"submit",disabled:b(t)},{default:h((()=>[p("Сохранить")])),_:1},8,["disabled"]),b(i)?(r(),f(y,{key:0})):_("",!0),m("div",R,g(a.message),1)])],32)}}}),[["__scopeId","data-v-6b80d342"]]),E=e=>(I("data-v-bc947ab1"),e=e(),j(),e),G={class:"filter_container"},W=E((()=>m("h3",{class:"filter_title"},"Критерии выгрузки",-1))),M={class:"filter_content"},D={class:"item_title"},B={class:"filter"},N=E((()=>m("h4",{class:"filter_title"},"Район",-1))),O={class:"filter"},Q=E((()=>m("h4",{class:"filter_title"},"Год рождения",-1))),X={class:"buttons"},Y=["href"],Z=a(o({__name:"TheToolsSheets",setup(e){const l=t(),a=y([]),i=y([1920,2022]),o=y(""),d=y(null),x=n((()=>!a.value.length||(a.value.includes("district")&&a.value.includes("birth")?T.value||!d.value||!i.value[0]||!i.value[1]:T.value||!d.value&&(!i.value[0]||!i.value[1])))),I=[{name:"По району",value:"district"},{name:"По году",value:"birth"}],{fetchFunc:j,isLoading:T,data:S}=F({callback:async function(){o.value="";const e={district:d.value,birth:{from:i.value[0],to:i.value[1]||9999}};return await P.saveFormsToSheet(e)},successMessage:"Сформировано"});return w(S,(()=>{o.value=S.value?.link||""})),(e,t)=>{const n=c("CCheckbox"),y=c("v-select"),w=c("v-text-field"),S=c("v-range-slider"),L=c("v-btn"),F=c("LoadingWheel");return r(),u("div",G,[W,m("div",M,[(r(),u(V,null,k(I,(e=>m("div",{class:"filter_item",key:e.name},[m("header",D,g(e.name),1),v(n,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),value:e.value,theme:b(l).currentTheme,onChecked:l=>function(e,l){if(!e)switch(l){case"district":return void(d.value=null);case"birth":return void(i.value=[1920,2022])}}(l,e.value)},null,8,["modelValue","value","theme","onChecked"])]))),64))]),C(m("div",B,[N,v(y,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),label:"Район",items:b(s).districts},null,8,["modelValue","items"])],512),[[U,a.value.includes("district")]]),C(m("div",O,[Q,v(S,{min:"1920",max:"2022",step:"1",modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e)},{prepend:h((()=>[v(w,{modelValue:i.value[0],"onUpdate:modelValue":t[2]||(t[2]=e=>i.value[0]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",density:"compact",style:{width:"85px"}},null,8,["modelValue"])])),append:h((()=>[v(w,{modelValue:i.value[1],"onUpdate:modelValue":t[3]||(t[3]=e=>i.value[1]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",style:{width:"85px"},density:"compact"},null,8,["modelValue"])])),_:1},8,["modelValue"])],512),[[U,a.value.includes("birth")]]),m("div",X,[v(L,{onClick:b(j),disabled:b(x)},{default:h((()=>[p("Сформировать")])),_:1},8,["onClick","disabled"]),b(T)?(r(),f(F,{key:0})):_("",!0)]),o.value?(r(),u("a",{key:0,class:"sheets_link",target:"_blank",href:o.value},"Ссылка на выгруженные заявки",8,Y)):_("",!0)])}}}),[["__scopeId","data-v-bc947ab1"]]),$=e=>(I("data-v-1285b9d7"),e=e(),j(),e),q={key:0,class:"loader"},z=$((()=>m("span",null,null,-1))),H={key:1,class:"content"},J={class:"user_list"},ee=$((()=>m("tr",{class:"list_header"},[m("th",null,"Имя"),m("th",null,"Е-мэйл"),m("th",null,"Роль")],-1))),le={class:"list_row"},ae={class:"row_item"},te={class:"row_item"},se={class:"roles"},ie=$((()=>m("label",{class:"role_name"},"Пользователь",-1))),oe={class:"roles"},de=$((()=>m("label",{class:"role_name"},"Админ ",-1))),ne=a(o({__name:"TheToolsRoles",setup(e){const l=t(),{fetchFunc:a,data:s,isLoading:i}=F({callback:async()=>K.getUsers(l.user._id),alert:!1}),{fetchFunc:o}=F({callback:async function(e,a){return l.alert.isVisible&&l.showAlert(!1),K.updateRoles(e,a)},successMessage:"Обновлено"}),d=y(""),f=n((()=>s.value?.filter((e=>e.email.toLowerCase().includes(d.value.toLowerCase())||e.name.toLowerCase().includes(d.value.toLowerCase())))));return T(a),(e,a)=>{const t=c("LoadingWheel"),s=c("v-text-field"),n=c("v-tooltip"),_=c("CCheckbox");return b(i)?(r(),u("div",q,[v(t),z])):(r(),u("div",H,[v(s,{label:"Поиск",modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),variant:"outlined"},null,8,["modelValue"]),m("table",J,[m("tbody",null,[ee,(r(!0),u(V,null,k(b(f),(e=>(r(),u("tr",le,[m("td",ae,[m("span",null,[p(g(e.name),1),v(n,{activator:"parent",location:"bottom"},{default:h((()=>[p(g(e.name),1)])),_:2},1024)])]),m("td",te,[m("span",null,[p(g(e.email),1),v(n,{activator:"parent",location:"bottom"},{default:h((()=>[p(g(e.email),1)])),_:2},1024)])]),m("td",null,[m("div",se,[v(_,{class:"role_set",value:"user",modelValue:e.roles,"onUpdate:modelValue":l=>e.roles=l,disabled:!0,theme:b(l).currentTheme},null,8,["modelValue","onUpdate:modelValue","theme"]),ie]),m("div",oe,[v(_,{class:"role_set",value:"admin",modelValue:e.roles,"onUpdate:modelValue":l=>e.roles=l,onChange:l=>b(o)(e._id,e.roles),theme:b(l).currentTheme},null,8,["modelValue","onUpdate:modelValue","onChange","theme"]),de])])])))),256))])])]))}}}),[["__scopeId","data-v-1285b9d7"]]),ce={class:"tools"},re=(e=>(I("data-v-af500cc2"),e=e(),j(),e))((()=>m("h1",{class:"title"},"Инструменты",-1))),ue={class:"tools_list"},ve={class:"list_item"},me={class:"list_item"},he={class:"list_item"},pe=a(o({__name:"TheTools",setup(e){const{goBack:l}=L(),a=d({integrate:!1,sheets:!1,adminRights:!1});function t(e){Object.keys(a).forEach((l=>{const t=l;a[t]!==a[e]&&(a[t]=!1)})),a[e]=!a[e]}return(e,s)=>{const i=c("v-btn");return r(),u(V,null,[v(i,{class:"home_button",onClick:b(l)},{default:h((()=>[p("Назад")])),_:1},8,["onClick"]),m("div",ce,[re,m("ul",ue,[m("li",ve,[m("h3",{class:S(["item_title",a.integrate?"selected":""]),onClick:s[0]||(s[0]=e=>t("integrate"))},"Настроить интеграцию с Google",2),C(v(A,null,null,512),[[U,a.integrate]])]),m("li",me,[m("h3",{class:S(["item_title",a.sheets?"selected":""]),onClick:s[1]||(s[1]=e=>t("sheets"))},"Выгрузить заявки в Google Sheets",2),C(v(Z,null,null,512),[[U,a.sheets]])]),m("li",he,[m("h3",{class:S(["item_title",a.adminRights?"selected":""]),onClick:s[2]||(s[2]=e=>t("adminRights"))},"Настроить роли пользователей",2),a.adminRights?(r(),f(ne,{key:0})):_("",!0)])])])],64)}}}),[["__scopeId","data-v-af500cc2"]]);e("default",o({__name:"ToolsView",setup(e){const l=t();return(e,a)=>b(l).isAdmin?(r(),f(pe,{key:1})):(r(),f(i,{key:0,code:403,message:"Forbidden"}))}}))}}}));
