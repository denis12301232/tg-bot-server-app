import{d as O,s as R,c as W,Q as j,r as $,u as k,o as J,w as Q,C,g as s,v as m,b as f,f as o,h as u,e as n,F as w,R as z,m as G,n as p,p as H,q as K,l as P,A as B,S as U,a,i as d,J as X,_ as Y}from"./index.782a5c9b.js";import S from"./TheError.bf77ace0.js";import{T as Z}from"./TableAssistance.77dd3190.js";const A=i=>(H("data-v-33ebc035"),i=i(),K(),i),ee={key:1,class:"loader"},se={class:"container"},te=A(()=>n("h1",{class:"title"},"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u044F\u0432\u043A\u0435",-1)),oe={class:"info"},ue={class:"buttons"},ae=A(()=>n("span",null,null,-1)),ne=O({__name:"ListByIdView",setup(i){const I=R(),v=P(),t=G(),h=W(()=>t.params.id),c=j(C.assistance),l=$(t.query.edit==="true"),{fetchFunc:b,isLoading:L,data:r}=k({callback:async()=>B.getFormById(h.value),alert:!1}),{fetchFunc:q,isLoading:D}=k({callback:T,successMessage:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E"}),V={};J(()=>{b().then(()=>{t.query.edit==="true"&&y()})}),Q(t,()=>{t.query.edit==="true"?l.value=!0:l.value=!1,t.query.edit==="true"&&y()},{deep:!0});function y(){Object.keys(C.assistance).forEach(e=>{e==="phone"?c[e].value=r.value[e].slice(4):c[e].value=r.value[e]})}function F(){v.push({query:{edit:"true"}})}function x(){v.push({query:{edit:"false"}})}async function T(){const e=new U(c);await B.modifyAssistanceForm(e,h.value),await b(),F()}return(e,g)=>{const N=p("LoadingWheel"),_=p("v-btn"),M=p("v-icon");return s(I).user.email?s(L)?(a(),f("div",ee,[o(N)])):Object.entries(s(r)||{}).length?(a(),f(w,{key:3},[o(_,{class:"home_button",onClick:g[0]||(g[0]=E=>e.$router.push("/"))},{default:u(()=>[d("\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E")]),_:1}),n("div",se,[te,n("div",oe,[l.value?(a(),m(z,{key:1,onSave:s(q),form:s(c),"is-loading":s(D),title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"},{submit:u(E=>[o(_,{type:"submit",disabled:!E.form.valid},{default:u(()=>[d("Ok")]),_:2},1032,["disabled"])]),cancel:u(()=>[o(_,{onClick:X(x,["prevent"])},{default:u(()=>[d("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1},8,["onClick"])]),_:1},8,["onSave","form","is-loading"])):(a(),f(w,{key:0},[n("div",ue,[ae,o(M,{class:"button",tag:"button",onClick:F},{default:u(()=>[d("mdi-pencil")]),_:1})]),o(Z,{form:s(r)||s(V)},null,8,["form"])],64))])])],64)):(a(),m(S,{key:2,code:404,message:"Not Found"})):(a(),m(S,{key:0,code:403,message:"Forbidden"}))}}});const de=Y(ne,[["__scopeId","data-v-33ebc035"]]);export{de as default};
