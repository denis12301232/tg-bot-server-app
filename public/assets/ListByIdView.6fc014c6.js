import{j,h as M,r as O,E as R,w as Q,u as e,a5 as _,U as p,y as o,_ as a,X as i,F as k,$ as f,a7 as U,a8 as X,W as u,Q as d,a2 as $}from"./@vue.6acdfb34.js";import{b as z,u as G}from"./vue-router.cd563335.js";import{u as H,C as E,_ as J}from"./index.2d61b0ad.js";import{u as K}from"./useForm.12d3d566.js";import{u as C}from"./useFetching.28e2ee03.js";import{u as P}from"./useNavigation.8e3f35ed.js";import{A as w}from"./AssistanceService.be5eaf50.js";import{F as Y,A as Z}from"./AssistanseFormDto.56a8bcb1.js";import B from"./TheError.8d836bc1.js";import{T as ee}from"./TableAssistance.ade509f0.js";import"./pinia.6b015bcc.js";import"./vue-demi.b3a9cad9.js";import"./vuetify.e3688c29.js";import"./axios.0e4a87d2.js";import"./form-data.2b153385.js";/* empty css             */import"./core-js.40dbafa1.js";const A=n=>(U("data-v-83bb886e"),n=n(),X(),n),te={key:1,class:"loader"},se={class:"container"},oe=A(()=>i("h1",{class:"title"},"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u044F\u0432\u043A\u0435",-1)),ae={class:"info"},ue={class:"buttons"},ie=A(()=>i("span",null,null,-1)),ne=j({__name:"ListByIdView",setup(n){const h=H(),v=G(),s=z(),{goBack:I}=P(),b=M(()=>s.params.id),r=K(E.assistance),l=O(s.query.edit==="true"),{fetchFunc:y,isLoading:L,data:c}=C({callback:async()=>w.getFormById(b.value),alert:!1}),{fetchFunc:S,isLoading:V}=C({callback:D,successMessage:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E"}),q={};R(()=>{y().then(()=>{s.query.edit==="true"&&F()})}),Q(s,()=>{s.query.edit==="true"?l.value=!0:l.value=!1,s.query.edit==="true"&&F()},{deep:!0});function F(){Object.keys(E.assistance).forEach(t=>{t==="phone"?r[t].value=c.value[t].slice(4):r[t].value=c.value[t]})}function g(){v.push({query:{edit:"true"}})}function x(){v.push({query:{edit:"false"}})}async function D(){const t=new Z(r);await w.modifyAssistanceForm(t,b.value),await y(),g()}return(t,re)=>{const T=f("LoadingWheel"),m=f("v-btn"),N=f("v-icon");return e(h).user.email?e(L)?(u(),p("div",te,[o(T)])):Object.entries(e(c)||{}).length?(u(),p(k,{key:3},[o(m,{class:"home_button",onClick:e(I)},{default:a(()=>[d("\u041D\u0430\u0437\u0430\u0434")]),_:1},8,["onClick"]),i("div",se,[oe,i("div",ae,[l.value?(u(),_(Y,{key:1,onSave:e(S),form:e(r),"is-loading":e(V),title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",theme:e(h).currentTheme},{submit:a(W=>[o(m,{type:"submit",disabled:!W.form.valid},{default:a(()=>[d("Ok")]),_:2},1032,["disabled"])]),cancel:a(()=>[o(m,{onClick:$(x,["prevent"])},{default:a(()=>[d("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1},8,["onClick"])]),_:1},8,["onSave","form","is-loading","theme"])):(u(),p(k,{key:0},[i("div",ue,[ie,o(N,{class:"button",tag:"button",onClick:g},{default:a(()=>[d("mdi-pencil")]),_:1})]),o(ee,{form:e(c)||e(q)},null,8,["form"])],64))])])],64)):(u(),_(B,{key:2,code:404,message:"Not Found"})):(u(),_(B,{key:0,code:403,message:"Forbidden"}))}}});const Be=J(ne,[["__scopeId","data-v-83bb886e"]]);export{Be as default};
