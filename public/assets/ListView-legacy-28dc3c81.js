System.register(["./index-legacy-39c22bb2.js","./TheHeaderMenu-legacy-7e8beb72.js","./useFetching-legacy-78eb828d.js","./AssistanceService-legacy-613f2070.js","./TheError-legacy-8cb894ec.js","./useForm-legacy-520eec2b.js"],(function(t,e){"use strict";var a,s,i,l,n,o,d,c,r,u,m,f,b,p,v,h,g,_,x,y,L,k,w,C,S,A,H,V,j,T,F,M,Q,E,U=document.createElement("style");return U.textContent=".container[data-v-4f3ca15b]{padding:0 30px;width:50%;margin:0 auto}.container .title[data-v-4f3ca15b]{padding:20px 0;text-align:center}.list_title[data-v-4f3ca15b]{padding:10px}.list_title[data-v-4f3ca15b]:hover{color:teal;cursor:pointer}.list[data-v-4f3ca15b]{overflow:hidden;padding:0}.list>*[data-v-4f3ca15b]:not(:first-child){margin-top:5px}.list .list_item[data-v-4f3ca15b]{border:1px solid #dadce0;border-radius:5px}.list .list_number[data-v-4f3ca15b]{border-right:1px solid #dadce0;padding:10px 10px 10px 0!important;display:flex;align-items:center}.list .list_buttons[data-v-4f3ca15b]{border-left:1px solid #dadce0;padding:10px 0 10px 10px!important}.buttons[data-v-4f3ca15b]{display:flex;justify-content:space-between;padding:30px 0 0}.buttons .buttons_load[data-v-4f3ca15b]{display:flex;align-items:center;padding:5px}.buttons .buttons_load .confirm[data-v-4f3ca15b]{width:65px}.buttons .buttons_load .wheel[data-v-4f3ca15b]{margin-left:5px}.item_button[data-v-4f3ca15b]:hover{transform:scale(1.1)}.observer[data-v-4f3ca15b]{padding:1px;bottom:0px}.loading[data-v-4f3ca15b]{display:flex;justify-content:center}.error_message[data-v-4f3ca15b]{color:var(--error-message-color);text-align:center}@media (max-width: 768px){.container[data-v-4f3ca15b]{width:100%}}.list-item[data-v-4f3ca15b]{display:inline-block;margin-right:10px}.list-enter-active[data-v-4f3ca15b],.list-leave-active[data-v-4f3ca15b]{transition:all 1s ease}.list-enter-from[data-v-4f3ca15b],.list-leave-to[data-v-4f3ca15b]{opacity:0;transform:translateY(30px)}.list-move[data-v-4f3ca15b]{transition:transform .8s ease}\n",document.head.appendChild(U),{setters:[t=>{a=t.L,s=t.d,i=t.u,l=t.m,n=t.j,o=t.E,d=t.o,c=t.c,r=t.e,u=t.w,m=t.g,f=t.b,b=t.h,p=t.n,v=t.f,h=t.F,g=t.I,_=t.z,x=t.x,y=t.M,L=t.T,k=t.N,w=t.t,C=t.U,S=t.r,A=t.O,H=t.q,V=t.s,j=t._},t=>{T=t.T,F=t.a},t=>{M=t.u},t=>{Q=t.A},t=>{E=t.default},()=>{}],execute:function(){const e=a("human",{state:()=>({list:{page:0,total:0,limit:20,isLoading:!1,humansList:[],selectedSort:null,searchQuery:""}}),getters:{sortedHumansList:t=>"string"==typeof t.list.selectedSort?[...t.list.humansList].sort(((e,a)=>e[t.list.selectedSort]?.localeCompare(a[t.list.selectedSort]))):t.list.humansList,sortedAndSearchedHumansList(){return[...this.sortedHumansList].filter((t=>t.fio.includes(this.list.searchQuery)))}}}),U=t=>(H("data-v-4f3ca15b"),t=t(),V(),t),q=U((()=>m("h2",{style:{"text-align":"center"}},"Вы уверены?",-1))),I={class:"buttons"},W={class:"buttons_load"},$={class:"buttons_load"},z={class:"container"},N=U((()=>m("h1",{class:"title",style:{"margin-bottom":"10px"}},"Полный список",-1))),O={style:{padding:"5px 0"}},Y={class:"list_number",style:{padding:"0 10px"}},B={class:"list_buttons"},D={key:0,class:"error_message"},G={key:1,class:"loading"},J={class:"observer"},K=j(s({__name:"HumansList",setup(t){const a=i(),s=w(),H=e(),V=l((()=>H.list.page<H.list.total&&!K.value)),j=l((()=>!H.list.humansList.length)),T=n(!1),F=n(""),E=n([{value:"_id",title:"По умолчанию"},{value:"fio",title:"По фамилии"}]);o((()=>{H.list.humansList.length||U()}));const{fetchFunc:U,isLoading:K}=M({callback:async function(){H.list.page++;const t=await Q.catchHumansList({limit:H.list.limit,page:H.list.page});H.list.total=Math.ceil(+t.headers["x-total-count"]/H.list.limit),H.list.humansList=[...H.list.humansList,...t.data.humansList]},alert:!1}),{fetchFunc:P,isLoading:R}=M({callback:async function(){a.alert.isVisible&&a.showAlert(!1),await Q.deleteHuman(F.value),X(),H.list.humansList=H.list.humansList.filter((t=>t._id!==F.value))},successMessage:"Удалено"});function X(t){T.value=!T.value,t&&(F.value=t)}return(t,e)=>{const i=S("v-btn"),l=S("LoadingWheel"),n=S("ModalWindow"),o=S("v-select"),w=S("v-text-field"),F=S("v-icon"),M=S("v-tooltip"),Q=S("v-list-item-title"),Z=S("v-list-item"),tt=S("v-list"),et=A("intersection");return d(),c(h,null,[r(n,{show:T.value,onHide:X,theme:f(a).currentTheme},{default:u((()=>[q,m("div",I,[m("div",W,[r(i,{class:"confirm",onClick:f(P)},{default:u((()=>[b("Да")])),_:1},8,["onClick"]),f(R)?(d(),p(l,{key:0,class:"wheel"})):v("",!0)]),m("div",$,[r(i,{class:"confirm",onClick:X},{default:u((()=>[b("Нет")])),_:1})])])])),_:1},8,["show","theme"]),m("div",z,[N,m("div",O,[r(o,{label:"Сортировать",items:E.value,modelValue:f(H).list.selectedSort,"onUpdate:modelValue":e[0]||(e[0]=t=>f(H).list.selectedSort=t),variant:"solo"},null,8,["items","modelValue"]),r(w,{label:"Поиск",modelValue:f(H).list.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=t=>f(H).list.searchQuery=t),variant:"solo"},null,8,["modelValue"])]),f(H).sortedAndSearchedHumansList.length?(d(),p(tt,{key:0,class:"list"},{default:u((()=>[r(L,{name:"list"},{default:u((()=>[(d(!0),c(h,null,g(f(H).sortedAndSearchedHumansList,((e,i)=>(d(),p(Z,{class:"list_item",key:e._id},{prepend:u((()=>[m("div",Y,_(i+1+"."),1)])),append:u((()=>[m("div",B,[r(F,{class:"item_button",tag:"button",onClick:t=>async function(t){try{a.alert.isVisible&&a.showAlert(!1);const e=await C.copyToClipboard(t);a.setAlert("success",e)}catch(e){a.setAlert("error",e)}finally{a.showAlert(!0)}}(e.fio)},{default:u((()=>[b("mdi-content-copy")])),_:2},1032,["onClick"]),r(F,{class:"item_button",tag:"button",onClick:t=>{return a=e.fio,void s.push({path:"/info",query:{search:a}});var a}},{default:u((()=>[b("mdi-magnify")])),_:2},1032,["onClick"]),r(F,{class:"item_button",tag:"button",onClick:t=>X(e._id)},{default:u((()=>[b("mdi-delete-forever")])),_:2},1032,["onClick"])])])),default:u((()=>[r(Q,{class:"list_title",onClick:a=>t.$router.push(`/list/${e._id}`)},{default:u((()=>[r(M,{text:e.fio,location:"bottom"},{activator:u((({props:t})=>[m("span",x(y(t)),_(e.fio),17)])),_:2},1032,["text"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):v("",!0)]),f(j)&&!f(K)?(d(),c("h3",D,"Список пуст")):v("",!0),f(K)?(d(),c("div",G,[r(l)])):v("",!0),m("div",J,[k(m("div",null,null,512),[[et,{f:f(U),canLoad:()=>f(V)}]])])],64)}}}),[["__scopeId","data-v-4f3ca15b"]]),P={class:"content"};t("default",s({__name:"ListView",setup(t){const e=i();return(t,a)=>f(e).isAdmin?(d(),c(h,{key:1},[r(T,{onShow:f(e).setMenuVisible,onTheme:f(e).setTheme},null,8,["onShow","onTheme"]),r(F),m("div",P,[r(K)])],64)):(d(),p(E,{key:0,code:403,message:"Forbidden"}))}}))}}}));
