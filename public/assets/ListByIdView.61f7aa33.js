import{d as M,u as O,m as W,j as R,E as K,l as z,C as k,b as e,n as _,c as f,e as o,w as a,g as n,F as E,K as G,r as p,q as H,s as J,t as P,o as u,h as d,p as Q,_ as U}from"./index.800cd8c5.js";import{u as X}from"./useForm.2e99d712.js";import{u as C}from"./useFetching.eee5a6d9.js";import{u as Y}from"./useNavigation.09a04393.js";import{A as w}from"./AssistanceService.c1eb7ba1.js";import{F as Z,A as $}from"./AssistanseFormDto.bd45852a.js";import B from"./TheError.e1a46428.js";import{T as ee}from"./TableAssistance.e09e5da1.js";const A=i=>(H("data-v-83bb886e"),i=i(),J(),i),se={key:1,class:"loader"},te={class:"container"},oe=A(()=>n("h1",{class:"title"},"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u044F\u0432\u043A\u0435",-1)),ae={class:"info"},ue={class:"buttons"},ne=A(()=>n("span",null,null,-1)),ie=M({__name:"ListByIdView",setup(i){const h=O(),v=P(),t=G(),{goBack:I}=Y(),b=W(()=>t.params.id),c=X(k.assistance),l=R(t.query.edit==="true"),{fetchFunc:g,isLoading:L,data:r}=C({callback:async()=>w.getFormById(b.value),alert:!1}),{fetchFunc:S,isLoading:q}=C({callback:D,successMessage:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E"}),V={};K(()=>{g().then(()=>{t.query.edit==="true"&&F()})}),z(t,()=>{t.query.edit==="true"?l.value=!0:l.value=!1,t.query.edit==="true"&&F()},{deep:!0});function F(){Object.keys(k.assistance).forEach(s=>{s==="phone"?c[s].value=r.value[s].slice(4):c[s].value=r.value[s]})}function y(){v.push({query:{edit:"true"}})}function x(){v.push({query:{edit:"false"}})}async function D(){const s=new $(c);await w.modifyAssistanceForm(s,b.value),await g(),y()}return(s,ce)=>{const T=p("LoadingWheel"),m=p("v-btn"),N=p("v-icon");return e(h).user.email?e(L)?(u(),f("div",se,[o(T)])):Object.entries(e(r)||{}).length?(u(),f(E,{key:3},[o(m,{class:"home_button",onClick:e(I)},{default:a(()=>[d("\u041D\u0430\u0437\u0430\u0434")]),_:1},8,["onClick"]),n("div",te,[oe,n("div",ae,[l.value?(u(),_(Z,{key:1,onSave:e(S),form:e(c),"is-loading":e(q),title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",theme:e(h).currentTheme},{submit:a(j=>[o(m,{type:"submit",disabled:!j.form.valid},{default:a(()=>[d("Ok")]),_:2},1032,["disabled"])]),cancel:a(()=>[o(m,{onClick:Q(x,["prevent"])},{default:a(()=>[d("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1},8,["onClick"])]),_:1},8,["onSave","form","is-loading","theme"])):(u(),f(E,{key:0},[n("div",ue,[ne,o(N,{class:"button",tag:"button",onClick:y},{default:a(()=>[d("mdi-pencil")]),_:1})]),o(ee,{form:e(r)||e(V)},null,8,["form"])],64))])])],64)):(u(),_(B,{key:2,code:404,message:"Not Found"})):(u(),_(B,{key:0,code:403,message:"Forbidden"}))}}});const ve=U(ie,[["__scopeId","data-v-83bb886e"]]);export{ve as default};
