System.register(["./index-legacy-e3ed7e87.js","./TheError-legacy-811c0104.js","./@vue-legacy-f472956d.js","./useNavigation-legacy-35688046.js","./useFetching-legacy-e1fcbf65.js","./ToolsService-legacy-49bd9ca4.js","./AssistanceService-legacy-aa7f1bcf.js","./pinia-legacy-049720e3.js","./vue-demi-legacy-14d04f86.js","./vuetify-legacy-5de5351e.js","./axios-legacy-f3f8b04f.js","./form-data-legacy-e95b16df.js","./vue-router-legacy-1eca3dbd.js","./@mdi-legacy-4c0fdc7d.js","./core-js-legacy-a73dc4e0.js"],(function(e,a){"use strict";var l,t,s,i,o,d,n,c,r,u,v,m,p,h,f,_,b,g,x,y,w,V,k,C,U,I,j,T,S,L,F,K,P,R=document.createElement("style");return R.textContent=".google[data-v-6b80d342]{padding:10px 0}.filter_container>.filter_content[data-v-a8cf2aa0]{border:2px solid #738095;box-shadow:inset 0 0 2px rgba(207,215,230,.4);border-radius:5px;padding:5px}.filter_container>.filter_content>.filter_item[data-v-a8cf2aa0]{padding:3px 0;display:flex}.filter_container>.filter_content>.filter_item>.item_title[data-v-a8cf2aa0]{flex-basis:100px}.filter_container .filter_title[data-v-a8cf2aa0]{padding:10px 0}.buttons[data-v-a8cf2aa0]{display:flex;padding:10px 0}.sheets_link[data-v-a8cf2aa0]{display:inline-block;color:#208f47;text-decoration:none;font-weight:bolder;cursor:pointer}.sheets_link[data-v-a8cf2aa0]:visited{color:#208f47}.sheets_link[data-v-a8cf2aa0]:hover,.sheets_link[data-v-a8cf2aa0]:focus{color:#c4433a}.loader[data-v-1285b9d7]{display:flex;flex-direction:column;align-items:center;width:100%;padding-top:10px}.content[data-v-1285b9d7]{width:100%;padding-top:10px;padding-bottom:5px}.content .search[data-v-1285b9d7]{min-width:250px}.content .user_list[data-v-1285b9d7]{border-spacing:3px;margin-top:5px;background-color:inherit;border-collapse:collapse;border-radius:2px;border-style:hidden;box-shadow:0 0 0 1.5px #738095;width:100%;table-layout:fixed;min-width:250px}.content .user_list td[data-v-1285b9d7],.content .user_list th[data-v-1285b9d7]{border:solid 1px #ccc;padding:10px;border-radius:10px;overflow:auto;word-wrap:break-word}.content .user_list .list_row .row_item[data-v-1285b9d7]{vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles[data-v-1285b9d7]{display:flex;place-items:center}.roles>.role_name[data-v-1285b9d7]{flex-basis:90%;display:block;min-width:50px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles>.role_set[data-v-1285b9d7]{flex-basis:10%;min-width:30px}@media (max-width: 768px){.content[data-v-1285b9d7],.loader[data-v-1285b9d7]{width:100%;margin:0 auto}}.home_button[data-v-af500cc2]{margin:10px 0 0 10px}.tools[data-v-af500cc2]{margin:0 auto;width:90%}.tools .title[data-v-af500cc2]{padding:20px 0}.tools .tools_list[data-v-af500cc2]{padding-bottom:5px;width:50%}.tools .tools_list .list_item .item_title[data-v-af500cc2]{user-select:none}.tools .tools_list .list_item .item_title[data-v-af500cc2]:hover{cursor:pointer;color:teal}.selected[data-v-af500cc2]{color:teal}@media (max-width: 768px){.tools .tools_list[data-v-af500cc2]{width:100%}}\n",document.head.appendChild(R),{setters:[e=>{l=e._,t=e.u,s=e.C},e=>{i=e.default},e=>{o=e.j,d=e.a,n=e.h,c=e.$,r=e.W,u=e.U,v=e.y,m=e.X,p=e._,h=e.Q,f=e.u,_=e.a5,b=e.V,g=e.Z,x=e.a2,y=e.r,w=e.w,V=e.F,k=e.a4,C=e.I,U=e.K,I=e.a7,j=e.a8,T=e.E,S=e.Y},e=>{L=e.u},e=>{F=e.u},e=>{K=e.T},e=>{P=e.A},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a={class:"google_control"},R={class:"google_message"},A=l(o({__name:"TheToolsGoogle",setup(e){const l=d({serviceUser:"",servicePrivateKey:"",sheetId:"",folderId:"",message:""}),t=n((()=>!(l.serviceUser||l.servicePrivateKey||l.sheetId||l.folderId))),{fetchFunc:s,isLoading:i}=F({callback:async function(){await K.setGoogleServiceAccountSettings(l.serviceUser,l.servicePrivateKey,l.sheetId,l.folderId),l.serviceUser="",l.servicePrivateKey="",l.sheetId="",l.folderId=""},successMessage:"Сохранено"});return(e,o)=>{const d=c("v-text-field"),n=c("v-btn"),y=c("LoadingWheel");return r(),u("form",{class:"google",onSubmit:o[4]||(o[4]=x(((...e)=>f(s)&&f(s)(...e)),["prevent"]))},[v(d,{modelValue:l.serviceUser,"onUpdate:modelValue":o[0]||(o[0]=e=>l.serviceUser=e),variant:"outlined",label:"Service account email"},null,8,["modelValue"]),v(d,{modelValue:l.servicePrivateKey,"onUpdate:modelValue":o[1]||(o[1]=e=>l.servicePrivateKey=e),variant:"outlined",label:"Service account private key"},null,8,["modelValue"]),v(d,{modelValue:l.sheetId,"onUpdate:modelValue":o[2]||(o[2]=e=>l.sheetId=e),variant:"outlined",label:"Sheet ID"},null,8,["modelValue"]),v(d,{modelValue:l.folderId,"onUpdate:modelValue":o[3]||(o[3]=e=>l.folderId=e),variant:"outlined",label:"Folder ID"},null,8,["modelValue"]),m("div",a,[v(n,{type:"submit",disabled:f(t)},{default:p((()=>[h("Сохранить")])),_:1},8,["disabled"]),f(i)?(r(),_(y,{key:0})):b("",!0),m("div",R,g(l.message),1)])],32)}}}),[["__scopeId","data-v-6b80d342"]]),E=e=>(I("data-v-a8cf2aa0"),e=e(),j(),e),G={class:"filter_container"},W=E((()=>m("h3",{class:"filter_title"},"Критерии выгрузки",-1))),M={class:"filter_content"},D={class:"item_title"},B={class:"filter"},N=E((()=>m("h4",{class:"filter_title"},"Район",-1))),O={class:"filter"},Q=E((()=>m("h4",{class:"filter_title"},"Год рождения",-1))),X={class:"buttons"},Y=["href"],Z=l(o({__name:"TheToolsSheets",setup(e){const a=t(),l=y([]),i=y([1920,2022]),o=y(""),d=y(null),x=n((()=>!l.value.length||!(!l.value.includes("district")||d.value))),I=[{name:"По району",value:"district"},{name:"По году",value:"birth"}],{fetchFunc:j,isLoading:T,data:S}=F({callback:async function(){o.value="";const e={district:d.value,birth:{from:i.value[0],to:i.value[1]||9999}};return await P.saveFormsToSheet(e)},successMessage:"Сформировано"});return w(S,(()=>{o.value=S.value?.link||""})),(e,t)=>{const n=c("CCheckbox"),y=c("v-select"),w=c("v-text-field"),S=c("v-range-slider"),L=c("v-btn"),F=c("LoadingWheel");return r(),u("div",G,[W,m("div",M,[(r(),u(V,null,k(I,(e=>m("div",{class:"filter_item",key:e.name},[m("header",D,g(e.name),1),v(n,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),value:e.value,theme:f(a).currentTheme,onChecked:a=>function(e,a){if(!e)switch(a){case"district":return void(d.value=null);case"birth":return void(i.value=[1920,2022])}}(a,e.value)},null,8,["modelValue","value","theme","onChecked"])]))),64))]),C(m("div",B,[N,v(y,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),label:"Район",items:f(s).districts},null,8,["modelValue","items"])],512),[[U,l.value.includes("district")]]),C(m("div",O,[Q,v(S,{min:"1920",max:"2022",step:"1",modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e)},{prepend:p((()=>[v(w,{modelValue:i.value[0],"onUpdate:modelValue":t[2]||(t[2]=e=>i.value[0]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",density:"compact",style:{width:"85px"}},null,8,["modelValue"])])),append:p((()=>[v(w,{modelValue:i.value[1],"onUpdate:modelValue":t[3]||(t[3]=e=>i.value[1]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",style:{width:"85px"},density:"compact"},null,8,["modelValue"])])),_:1},8,["modelValue"])],512),[[U,l.value.includes("birth")]]),m("div",X,[v(L,{onClick:f(j),disabled:f(x)},{default:p((()=>[h("Сформировать")])),_:1},8,["onClick","disabled"]),f(T)?(r(),_(F,{key:0})):b("",!0)]),o.value?(r(),u("a",{key:0,class:"sheets_link",target:"_blank",href:o.value},"Ссылка на выгруженные заявки",8,Y)):b("",!0)])}}}),[["__scopeId","data-v-a8cf2aa0"]]),$=e=>(I("data-v-1285b9d7"),e=e(),j(),e),q={key:0,class:"loader"},z=$((()=>m("span",null,null,-1))),H={key:1,class:"content"},J={class:"user_list"},ee=$((()=>m("tr",{class:"list_header"},[m("th",null,"Имя"),m("th",null,"Е-мэйл"),m("th",null,"Роль")],-1))),ae={class:"list_row"},le={class:"row_item"},te={class:"row_item"},se={class:"roles"},ie=$((()=>m("label",{class:"role_name"},"Пользователь",-1))),oe={class:"roles"},de=$((()=>m("label",{class:"role_name"},"Админ ",-1))),ne=l(o({__name:"TheToolsRoles",setup(e){const a=t(),{fetchFunc:l,data:s,isLoading:i}=F({callback:async()=>K.getUsers(a.user._id),alert:!1}),{fetchFunc:o}=F({callback:async function(e,l){return a.alert.isVisible&&a.showAlert(!1),K.updateRoles(e,l)},successMessage:"Обновлено"}),d=y(""),_=n((()=>s.value?.filter((e=>e.email.toLowerCase().includes(d.value.toLowerCase())||e.name.toLowerCase().includes(d.value.toLowerCase())))));return T(l),(e,l)=>{const t=c("LoadingWheel"),s=c("v-text-field"),n=c("v-tooltip"),b=c("CCheckbox");return f(i)?(r(),u("div",q,[v(t),z])):(r(),u("div",H,[v(s,{label:"Поиск",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),variant:"outlined"},null,8,["modelValue"]),m("table",J,[m("tbody",null,[ee,(r(!0),u(V,null,k(f(_),(e=>(r(),u("tr",ae,[m("td",le,[m("span",null,[h(g(e.name),1),v(n,{activator:"parent",location:"bottom"},{default:p((()=>[h(g(e.name),1)])),_:2},1024)])]),m("td",te,[m("span",null,[h(g(e.email),1),v(n,{activator:"parent",location:"bottom"},{default:p((()=>[h(g(e.email),1)])),_:2},1024)])]),m("td",null,[m("div",se,[v(b,{class:"role_set",value:"user",modelValue:e.roles,"onUpdate:modelValue":a=>e.roles=a,disabled:!0,theme:f(a).currentTheme},null,8,["modelValue","onUpdate:modelValue","theme"]),ie]),m("div",oe,[v(b,{class:"role_set",value:"admin",modelValue:e.roles,"onUpdate:modelValue":a=>e.roles=a,onChange:a=>f(o)(e._id,e.roles),theme:f(a).currentTheme},null,8,["modelValue","onUpdate:modelValue","onChange","theme"]),de])])])))),256))])])]))}}}),[["__scopeId","data-v-1285b9d7"]]),ce={class:"tools"},re=(e=>(I("data-v-af500cc2"),e=e(),j(),e))((()=>m("h1",{class:"title"},"Инструменты",-1))),ue={class:"tools_list"},ve={class:"list_item"},me={class:"list_item"},pe={class:"list_item"},he=l(o({__name:"TheTools",setup(e){const{goBack:a}=L(),l=d({integrate:!1,sheets:!1,adminRights:!1});function t(e){Object.keys(l).forEach((a=>{const t=a;l[t]!==l[e]&&(l[t]=!1)})),l[e]=!l[e]}return(e,s)=>{const i=c("v-btn");return r(),u(V,null,[v(i,{class:"home_button",onClick:f(a)},{default:p((()=>[h("Назад")])),_:1},8,["onClick"]),m("div",ce,[re,m("ul",ue,[m("li",ve,[m("h3",{class:S(["item_title",l.integrate?"selected":""]),onClick:s[0]||(s[0]=e=>t("integrate"))},"Настроить интеграцию с Google",2),C(v(A,null,null,512),[[U,l.integrate]])]),m("li",me,[m("h3",{class:S(["item_title",l.sheets?"selected":""]),onClick:s[1]||(s[1]=e=>t("sheets"))},"Выгрузить заявки в Google Sheets",2),C(v(Z,null,null,512),[[U,l.sheets]])]),m("li",pe,[m("h3",{class:S(["item_title",l.adminRights?"selected":""]),onClick:s[2]||(s[2]=e=>t("adminRights"))},"Настроить роли пользователей",2),l.adminRights?(r(),_(ne,{key:0})):b("",!0)])])])],64)}}}),[["__scopeId","data-v-af500cc2"]]);e("default",o({__name:"ToolsView",setup(e){const a=t();return(e,l)=>f(a).isAdmin?(r(),_(he,{key:1})):(r(),_(i,{key:0,code:403,message:"Forbidden"}))}}))}}}));
