import{d as j,l as M,O as E,U as R,x as $,z as C,y as z,K as J,C as w,u as s,m,c as f,e as t,w as o,b as n,F as B,W as K,j as p,p as U,k as X,i as G,A,X as H,a as u,f as r,J as P,_ as Q}from"./index.0dc29be9.js";import I from"./TheError.17067eea.js";import{T as Y}from"./TableAssistance.843b5cfa.js";const L=i=>(U("data-v-34d1edbc"),i=i(),X(),i),Z={key:1,class:"loader"},ee={class:"container"},se=L(()=>n("h1",{class:"title"},"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u044F\u0432\u043A\u0435",-1)),te={class:"info"},oe={class:"buttons"},ue=L(()=>n("span",null,null,-1)),ae=j({__name:"ListByIdView",setup(i){const S={},D=M(),v=E().params.id,h=G(),a=E(),c=R(w.assistance),l=$(a.query.edit==="true"),{fetchFunc:b,isLoading:V,data:d}=C({callback:async()=>A.getFormById(v),alert:!1}),{fetchFunc:q,isLoading:x}=C({callback:N,successMessage:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E"});z(()=>{b().then(()=>{a.query.edit==="true"&&y()})}),J(a,()=>{a.query.edit==="true"?l.value=!0:l.value=!1,a.query.edit==="true"&&y()},{deep:!0});function y(){Object.keys(w.assistance).forEach(e=>{e==="phone"?c[e].value=d.value[e].slice(4):c[e].value=d.value[e]})}function F(){h.push({query:{edit:"true"}})}function T(){h.push({query:{edit:"false"}})}async function N(){const e=new H(c);await A.modifyAssistanceForm(e,v),await b(),F()}return(e,g)=>{const O=p("LoadingWheel"),_=p("v-btn"),W=p("v-icon");return s(D).user.email?s(V)?(u(),f("div",Z,[t(O)])):Object.entries(s(d)||{}).length?(u(),f(B,{key:3},[t(_,{class:"home_button",onClick:g[0]||(g[0]=k=>e.$router.push("/"))},{default:o(()=>[r("\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E")]),_:1}),n("div",ee,[se,n("div",te,[l.value?(u(),m(K,{key:1,onSave:s(q),form:s(c),"is-loading":s(x),title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"},{submit:o(k=>[t(_,{type:"submit",disabled:!k.form.valid},{default:o(()=>[r("Ok")]),_:2},1032,["disabled"])]),cancel:o(()=>[t(_,{onClick:P(T,["prevent"])},{default:o(()=>[r("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1},8,["onClick"])]),_:1},8,["onSave","form","is-loading"])):(u(),f(B,{key:0},[n("div",oe,[ue,t(W,{class:"button",tag:"button",onClick:F},{default:o(()=>[r("mdi-pencil")]),_:1})]),t(Y,{form:s(d)||s(S)},null,8,["form"])],64))])])],64)):(u(),m(I,{key:2,code:404,message:"Not Found"})):(u(),m(I,{key:0,code:403,message:"Forbidden"}))}}});const de=Q(ae,[["__scopeId","data-v-34d1edbc"]]);export{de as default};
