import{u as R}from"./useFetching.eee5a6d9.js";import{u as T}from"./useNavigation.09a04393.js";import{i as U,C as j,d as b,E as $,G as z,c as f,g as a,z as y,e as _,N as I,P as w,b as g,r as p,Q as G,o as v,_ as V,j as r,m as K,w as O,n as L,f as C,F as x,I as Q,O as H,q as J,s as X,h as Y,V as Z,R as ee}from"./index.800cd8c5.js";class ae{static getImages(n){return U.get(`${j.API_URL}/images/`,{params:{pageToken:n}})}}const te={class:"image-modal"},ne={class:"image-count"},se={class:"modal-content"},oe=["src"],le={class:"image-description"},ie=b({__name:"ImageModal",props:{link:{type:String,required:!0},description:{type:String,default:""},current:{type:Number,default:0},total:{type:Number,default:0}},emits:["close","prev","next"],setup(t,{emit:n}){$(()=>{document.addEventListener("keyup",c),document.addEventListener("keydown",i)}),z(()=>{document.removeEventListener("keyup",c),document.removeEventListener("keydown",i)});const s=G("isImageLoading");function m(){s.value=!1}function i(o){o.key==="ArrowLeft"?n("prev"):o.key==="ArrowRight"&&n("next")}function c(o){o.key==="Escape"&&n("close")}return(o,e)=>{const l=p("ButtonImage"),k=p("LoadingWheel");return v(),f("div",te,[a("div",ne,y(t.current+1+"/"+t.total),1),_(l,{class:"close-window",image:"close.png",onClick:e[0]||(e[0]=d=>n("close")),invert:!1}),_(l,{class:"right-arrow",image:"arrow-left.png",onClick:e[1]||(e[1]=d=>n("prev")),invert:!1}),_(l,{class:"left-arrow",image:"arrow-right.png",onClick:e[2]||(e[2]=d=>n("next")),invert:!1}),a("div",se,[I(_(k,null,null,512),[[w,g(s)]]),I(a("img",{src:t.link,onLoad:m},null,40,oe),[[w,!g(s)]]),a("div",le,y(t.description),1)])])}}});const ce=V(ie,[["__scopeId","data-v-d34a81b8"]]),B=t=>(J("data-v-5f8c6f47"),t=t(),X(),t),ue=B(()=>a("h1",{class:"title"},"\u0413\u0430\u043B\u0435\u0440\u0435\u044F",-1)),re={class:"images"},de=["onClick"],ve=["src"],ge=B(()=>a("div",{class:"image-hover"},null,-1)),me={class:"loading"},_e={class:"observer"},fe=b({__name:"ImagesView",setup(t){const{goBack:n}=T(),s=r([]),m=r(!1),i=r(""),c=r(!1),o=r(0),e=r(0),l=r(),k=K(()=>Z.required(l.value||"")&&!h.value),{fetchFunc:d,isLoading:h}=R({callback:N,alert:!1});ee("isImageLoading",c),$(d);async function N(){const u=await ae.getImages(l.value);s.value=[...s.value,...u.data.images],l.value=u.data.pageToken,o.value+=u.data.images.length}function E(){m.value=!1}function S(u){c.value=!0,i.value=s.value[u].link,e.value=u,m.value=!0}async function F(){if(!h.value){if(e.value+1>=o.value&&l.value)await d();else if(e.value+1>=o.value)return;e.value++,c.value=!0,i.value=s.value[e.value].link}}function D(){e.value-1<0||(e.value--,c.value=!0,i.value=s.value[e.value].link)}return(u,pe)=>{const M=p("v-btn"),W=p("LoadingWheel"),q=H("intersection");return v(),f(x,null,[_(M,{class:"home",onClick:g(n)},{default:O(()=>[Y("\u041D\u0430\u0437\u0430\u0434")]),_:1},8,["onClick"]),m.value?(v(),L(ce,{key:0,link:i.value,total:o.value,current:e.value,onClose:E,onNext:F,onPrev:D},null,8,["link","total","current"])):C("",!0),ue,a("div",re,[(v(!0),f(x,null,Q(s.value,(A,P)=>(v(),f("div",{class:"image-block",onClick:ke=>S(P)},[a("img",{src:A.link},null,8,ve),ge],8,de))),256))]),a("div",me,[g(h)?(v(),L(W,{key:0})):C("",!0)]),a("div",_e,[I(a("div",null,null,512),[[q,{f:g(d),canLoad:()=>g(k)}]])])],64)}}});const we=V(fe,[["__scopeId","data-v-5f8c6f47"]]);export{we as default};
