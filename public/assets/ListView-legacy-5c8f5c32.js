System.register(["./index-legacy-e3ed7e87.js","./TheHeaderMenu-legacy-18b99f26.js","./@vue-legacy-f472956d.js","./vue-router-legacy-1eca3dbd.js","./pinia-legacy-049720e3.js","./useFetching-legacy-e1fcbf65.js","./AssistanceService-legacy-aa7f1bcf.js","./TheError-legacy-811c0104.js","./vuetify-legacy-5de5351e.js","./axios-legacy-f3f8b04f.js","./form-data-legacy-e95b16df.js","./@mdi-legacy-4c0fdc7d.js","./core-js-legacy-a73dc4e0.js","./vue-demi-legacy-14d04f86.js","./useForm-legacy-9d55ab78.js"],(function(e,t){"use strict";var a,s,i,l,n,o,d,c,r,u,m,v,p,b,h,f,g,y,_,x,L,w,k,j,C,S,A,V,H,T,F,M,Q,U,E=document.createElement("style");return E.textContent=".container[data-v-4eabc170]{padding:0 30px;width:50%;margin:0 auto}.container .title[data-v-4eabc170]{padding:20px 0;text-align:center}.list_title[data-v-4eabc170]{padding:10px}.list_title[data-v-4eabc170]:hover{color:teal;cursor:pointer}.list[data-v-4eabc170]{overflow:hidden;padding:0}.list>*[data-v-4eabc170]:not(:first-child){margin-top:5px}.list .list_item[data-v-4eabc170]{border:1px solid #dadce0;border-radius:5px}.list .list_number[data-v-4eabc170]{border-right:1px solid #dadce0;padding:10px 10px 10px 0!important;display:flex;align-items:center}.list .list_buttons[data-v-4eabc170]{border-left:1px solid #dadce0;padding:10px 0 10px 10px!important}.buttons[data-v-4eabc170]{display:flex;justify-content:space-between;padding:30px 0 0}.buttons .buttons_load[data-v-4eabc170]{display:flex;align-items:center;padding:5px}.buttons .buttons_load .confirm[data-v-4eabc170]{width:65px}.buttons .buttons_load .wheel[data-v-4eabc170]{margin-left:5px}.item_button[data-v-4eabc170]:hover{transform:scale(1.1)}.observer[data-v-4eabc170]{padding:1px;bottom:0px}.loading[data-v-4eabc170]{display:flex;justify-content:center}.error_message[data-v-4eabc170]{color:var(--error-message-color);text-align:center}@media (max-width: 768px){.container[data-v-4eabc170]{width:100%}}.list-item[data-v-4eabc170]{display:inline-block;margin-right:10px}.list-enter-active[data-v-4eabc170],.list-leave-active[data-v-4eabc170]{transition:all .5s ease}.list-enter-from[data-v-4eabc170],.list-leave-to[data-v-4eabc170]{opacity:0;transform:translateY(30px)}.list-move[data-v-4eabc170]{transition:transform .5s ease}\n",document.head.appendChild(E),{setters:[e=>{a=e.u,s=e.U,i=e._},e=>{l=e.T,n=e.a},e=>{o=e.j,d=e.h,c=e.r,r=e.E,u=e.W,m=e.U,v=e.y,p=e._,b=e.X,h=e.u,f=e.Q,g=e.a5,y=e.V,_=e.F,x=e.a4,L=e.Z,w=e.a9,k=e.ab,j=e.T,C=e.I,S=e.$,A=e.J,V=e.a7,H=e.a8},e=>{T=e.u},e=>{F=e.d},e=>{M=e.u},e=>{Q=e.A},e=>{U=e.default},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const t=F("human",{state:()=>({list:{page:0,total:0,limit:20,isLoading:!1,humansList:[],selectedSort:null,searchQuery:""}}),getters:{sortedHumansList:e=>"string"==typeof e.list.selectedSort?[...e.list.humansList].sort(((t,a)=>t[e.list.selectedSort]?.localeCompare(a[e.list.selectedSort]))):e.list.humansList,sortedAndSearchedHumansList(){return[...this.sortedHumansList].filter((e=>e.fio.toLowerCase().includes(this.list.searchQuery.toLowerCase())))}}}),E=e=>(V("data-v-4eabc170"),e=e(),H(),e),W=E((()=>b("h2",{style:{"text-align":"center"}},"Вы уверены?",-1))),$={class:"buttons"},I={class:"buttons_load"},q={class:"buttons_load"},J={class:"container"},X=E((()=>b("h1",{class:"title",style:{"margin-bottom":"10px"}},"Полный список",-1))),Y={style:{padding:"5px 0"}},Z={class:"list_number",style:{padding:"0 10px"}},z={class:"list_buttons"},B={key:0,class:"error_message"},D={key:1,class:"loading"},G={class:"observer"},K=i(o({__name:"HumansList",setup(e){const i=a(),l=T(),n=t(),o=d((()=>n.list.page<n.list.total&&!K.value)),V=d((()=>!n.list.humansList.length)),H=c(!1),F=c(""),U=c([{value:"_id",title:"По умолчанию"},{value:"fio",title:"По фамилии"}]);r((()=>{n.list.humansList.length||E()}));const{fetchFunc:E,isLoading:K}=M({callback:async function(){n.list.page++;const e=await Q.catchHumansList({limit:n.list.limit,page:n.list.page});n.list.total=Math.ceil(+e.headers["x-total-count"]/n.list.limit),n.list.humansList=[...n.list.humansList,...e.data.humansList]},alert:!1}),{fetchFunc:N,isLoading:O}=M({callback:async function(){i.alert.isVisible&&i.showAlert(!1),await Q.deleteHuman(F.value),P(),n.list.humansList=n.list.humansList.filter((e=>e._id!==F.value))},successMessage:"Удалено"});function P(e){H.value=!H.value,e&&(F.value=e)}return(e,t)=>{const a=S("v-btn"),d=S("LoadingWheel"),c=S("ModalWindow"),r=S("v-select"),T=S("v-text-field"),F=S("v-icon"),M=S("v-tooltip"),Q=S("v-list-item-title"),R=S("v-list-item"),ee=S("v-list"),te=A("intersection");return u(),m(_,null,[v(c,{show:H.value,onHide:P,theme:h(i).currentTheme},{default:p((()=>[W,b("div",$,[b("div",I,[v(a,{class:"confirm",onClick:h(N)},{default:p((()=>[f("Да")])),_:1},8,["onClick"]),h(O)?(u(),g(d,{key:0,class:"wheel"})):y("",!0)]),b("div",q,[v(a,{class:"confirm",onClick:P},{default:p((()=>[f("Нет")])),_:1})])])])),_:1},8,["show","theme"]),b("div",J,[X,b("div",Y,[v(r,{label:"Сортировать",items:U.value,modelValue:h(n).list.selectedSort,"onUpdate:modelValue":t[0]||(t[0]=e=>h(n).list.selectedSort=e),variant:"solo"},null,8,["items","modelValue"]),v(T,{label:"Поиск",modelValue:h(n).list.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>h(n).list.searchQuery=e),variant:"solo"},null,8,["modelValue"])]),h(n).sortedAndSearchedHumansList.length?(u(),g(ee,{key:0,class:"list"},{default:p((()=>[v(j,{name:"list"},{default:p((()=>[(u(!0),m(_,null,x(h(n).sortedAndSearchedHumansList,((t,a)=>(u(),g(R,{class:"list_item",key:t._id},{prepend:p((()=>[b("div",Z,L(a+1+"."),1)])),append:p((()=>[b("div",z,[v(F,{class:"item_button",tag:"button",onClick:e=>async function(e){try{i.alert.isVisible&&i.showAlert(!1);const t=await s.copyToClipboard(e);i.setAlert("success",t)}catch(t){i.setAlert("error",t)}finally{i.showAlert(!0)}}(t.fio)},{default:p((()=>[f("mdi-content-copy")])),_:2},1032,["onClick"]),v(F,{class:"item_button",tag:"button",onClick:e=>{return a=t.fio,void l.push({path:"/info",query:{search:a}});var a}},{default:p((()=>[f("mdi-magnify")])),_:2},1032,["onClick"]),v(F,{class:"item_button",tag:"button",onClick:e=>P(t._id)},{default:p((()=>[f("mdi-delete-forever")])),_:2},1032,["onClick"])])])),default:p((()=>[v(Q,{class:"list_title",onClick:a=>e.$router.push(`/list/${t._id}`)},{default:p((()=>[v(M,{text:t.fio,location:"bottom"},{activator:p((({props:e})=>[b("span",w(k(e)),L(t.fio),17)])),_:2},1032,["text"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):y("",!0)]),h(V)&&!h(K)?(u(),m("h3",B,"Список пуст")):y("",!0),h(K)?(u(),m("div",D,[v(d)])):y("",!0),b("div",G,[C(b("div",null,null,512),[[te,{f:h(E),canLoad:()=>h(o)}]])])],64)}}}),[["__scopeId","data-v-4eabc170"]]),N={class:"content"};e("default",o({__name:"ListView",setup(e){const t=a();return(e,a)=>h(t).isAdmin?(u(),m(_,{key:1},[v(l,{onShow:h(t).setMenuVisible,onTheme:h(t).setTheme},null,8,["onShow","onTheme"]),v(n),b("div",N,[v(K)])],64)):(u(),g(U,{key:0,code:403,message:"Forbidden"}))}}))}}}));
