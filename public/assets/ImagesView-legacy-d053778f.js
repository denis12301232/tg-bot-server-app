System.register(["./useFetching-legacy-78eb828d.js","./useNavigation-legacy-1fb35f40.js","./index-legacy-39c22bb2.js"],(function(e,a){"use strict";var t,i,n,o,l,r,s,c,d,u,g,m,v,p,f,b,k,h,x,w,y,L,C,I,_,z,E,j,N,q,A,F=document.createElement("style");return F.textContent=".image-modal[data-v-d34a81b8]{position:fixed;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.836);z-index:9999;display:flex}.image-modal>.modal-content[data-v-d34a81b8]{margin:auto;max-width:800px;position:relative;user-select:none}.image-modal>.modal-content>.image-description[data-v-d34a81b8]{position:absolute;bottom:0;left:50%;margin-right:-50%;transform:translate(-50%)}.image-modal>.close-window[data-v-d34a81b8]{position:absolute;right:5px;top:5px;z-index:1}.image-modal>.right-arrow[data-v-d34a81b8]{position:absolute;top:50%;transform:translateY(-50%);left:5px;z-index:1}.image-modal>.left-arrow[data-v-d34a81b8]{position:absolute;top:50%;transform:translateY(-50%);right:5px;z-index:1}.image-modal>.image-count[data-v-d34a81b8]{position:absolute;left:5px;top:5px;color:var(--water-color);font-size:1.2em;font-weight:700}.home[data-v-5f8c6f47]{margin-left:10px;margin-top:10px}.observer[data-v-5f8c6f47]{padding:1px;bottom:0px}.title[data-v-5f8c6f47]{text-align:center;font-weight:700;font-size:3rem;text-transform:uppercase;letter-spacing:.01em;padding:20px 0;margin:0}.loading[data-v-5f8c6f47]{display:flex;justify-content:center}.images[data-v-5f8c6f47]{display:grid;grid-template-columns:repeat(4,1fr);gap:4px;padding:0 10px 20px}.images .image-block[data-v-5f8c6f47]{overflow:hidden;position:relative;cursor:pointer;-webkit-tap-highlight-color:transparent}.images .image-block>.image-hover[data-v-5f8c6f47]{position:absolute;top:0;bottom:0;right:0;left:0;background-color:rgba(0,0,0,.7);opacity:0}.images .image-block>img[data-v-5f8c6f47]{transform:scale(1);transition:transform 3s;object-fit:cover;height:100%;width:100%}.images .image-block:hover>img[data-v-5f8c6f47]{transform:scale(1.1)}.images .image-block:hover>.image-hover[data-v-5f8c6f47]{opacity:1}@media (max-width: 768px){.images[data-v-5f8c6f47]{grid-template-columns:repeat(2,1fr)}}\n",document.head.appendChild(F),{setters:[e=>{t=e.u},e=>{i=e.u},e=>{n=e.i,o=e.C,l=e.d,r=e.E,s=e.G,c=e.c,d=e.g,u=e.z,g=e.e,m=e.N,v=e.P,p=e.b,f=e.r,b=e.Q,k=e.o,h=e._,x=e.j,w=e.m,y=e.w,L=e.n,C=e.f,I=e.F,_=e.I,z=e.O,E=e.q,j=e.s,N=e.h,q=e.V,A=e.R}],execute:function(){class a{static getImages(e){return n.get(`${o.API_URL}/images/`,{params:{pageToken:e}})}}const F={class:"image-modal"},P={class:"image-count"},R={class:"modal-content"},S=["src"],B={class:"image-description"},T=h(l({__name:"ImageModal",props:{link:{type:String,required:!0},description:{type:String,default:""},current:{type:Number,default:0},total:{type:Number,default:0}},emits:["close","prev","next"],setup(e,{emit:a}){r((()=>{document.addEventListener("keyup",o),document.addEventListener("keydown",n)})),s((()=>{document.removeEventListener("keyup",o),document.removeEventListener("keydown",n)}));const t=b("isImageLoading");function i(){t.value=!1}function n(e){"ArrowLeft"===e.key?a("prev"):"ArrowRight"===e.key&&a("next")}function o(e){"Escape"===e.key&&a("close")}return(n,o)=>{const l=f("ButtonImage"),r=f("LoadingWheel");return k(),c("div",F,[d("div",P,u(e.current+1+"/"+e.total),1),g(l,{class:"close-window",image:"close.png",onClick:o[0]||(o[0]=e=>a("close")),invert:!1}),g(l,{class:"right-arrow",image:"arrow-left.png",onClick:o[1]||(o[1]=e=>a("prev")),invert:!1}),g(l,{class:"left-arrow",image:"arrow-right.png",onClick:o[2]||(o[2]=e=>a("next")),invert:!1}),d("div",R,[m(g(r,null,null,512),[[v,p(t)]]),m(d("img",{src:e.link,onLoad:i},null,40,S),[[v,!p(t)]]),d("div",B,u(e.description),1)])])}}}),[["__scopeId","data-v-d34a81b8"]]),V=e=>(E("data-v-5f8c6f47"),e=e(),j(),e),W=V((()=>d("h1",{class:"title"},"Галерея",-1))),Y={class:"images"},G=["onClick"],M=["src"],O=V((()=>d("div",{class:"image-hover"},null,-1))),Q={class:"loading"},U={class:"observer"};e("default",h(l({__name:"ImagesView",setup(e){const{goBack:n}=i(),o=x([]),l=x(!1),s=x(""),u=x(!1),v=x(0),b=x(0),h=x(),E=w((()=>q.required(h.value||"")&&!F.value)),{fetchFunc:j,isLoading:F}=t({callback:async function(){const e=await a.getImages(h.value);o.value=[...o.value,...e.data.images],h.value=e.data.pageToken,v.value+=e.data.images.length},alert:!1});function P(){l.value=!1}async function R(){if(!F.value){if(b.value+1>=v.value&&h.value)await j();else if(b.value+1>=v.value)return;b.value++,u.value=!0,s.value=o.value[b.value].link}}function S(){b.value-1<0||(b.value--,u.value=!0,s.value=o.value[b.value].link)}return A("isImageLoading",u),r(j),(e,a)=>{const t=f("v-btn"),i=f("LoadingWheel"),r=z("intersection");return k(),c(I,null,[g(t,{class:"home",onClick:p(n)},{default:y((()=>[N("Назад")])),_:1},8,["onClick"]),l.value?(k(),L(T,{key:0,link:s.value,total:v.value,current:b.value,onClose:P,onNext:R,onPrev:S},null,8,["link","total","current"])):C("",!0),W,d("div",Y,[(k(!0),c(I,null,_(o.value,((e,a)=>(k(),c("div",{class:"image-block",onClick:e=>function(e){u.value=!0,s.value=o.value[e].link,b.value=e,l.value=!0}(a)},[d("img",{src:e.link},null,8,M),O],8,G)))),256))]),d("div",Q,[p(F)?(k(),L(i,{key:0})):C("",!0)]),d("div",U,[m(d("div",null,null,512),[[r,{f:p(j),canLoad:()=>p(E)}]])])],64)}}}),[["__scopeId","data-v-5f8c6f47"]]))}}}));
