import{u as j}from"./useFetching.28e2ee03.js";import{u as q}from"./useNavigation.8e3f35ed.js";import{a as K}from"./axios.0e4a87d2.js";import{C as P,_ as $,V as R}from"./index.2d61b0ad.js";import{j as V,E as b,A as J,U as p,X as t,Z as y,y as _,I,K as L,u as m,$ as f,c as Q,W as v,r as u,h as X,_ as Z,a5 as w,V as C,F as x,a4 as z,J as G,a7 as H,a8 as O,Q as Y,p as ee}from"./@vue.6acdfb34.js";import"./vue-router.cd563335.js";import"./form-data.2b153385.js";import"./pinia.6b015bcc.js";import"./vue-demi.b3a9cad9.js";import"./vuetify.e3688c29.js";/* empty css             */import"./core-js.40dbafa1.js";class te{static getImages(n){return K.get(`${P.API_URL}/images/`,{params:{pageToken:n}})}}const ae={class:"image-modal"},ne={class:"image-count"},se={class:"modal-content"},oe=["src"],ie={class:"image-description"},le=V({__name:"ImageModal",props:{link:{type:String,required:!0},description:{type:String,default:""},current:{type:Number,default:0},total:{type:Number,default:0}},emits:["close","prev","next"],setup(a,{emit:n}){b(()=>{document.addEventListener("keyup",c),document.addEventListener("keydown",l)}),J(()=>{document.removeEventListener("keyup",c),document.removeEventListener("keydown",l)});const s=Q("isImageLoading");function g(){s.value=!1}function l(o){o.key==="ArrowLeft"?n("prev"):o.key==="ArrowRight"&&n("next")}function c(o){o.key==="Escape"&&n("close")}return(o,e)=>{const i=f("ButtonImage"),k=f("LoadingWheel");return v(),p("div",ae,[t("div",ne,y(a.current+1+"/"+a.total),1),_(i,{class:"close-window",image:"close.png",onClick:e[0]||(e[0]=d=>n("close")),invert:!1}),_(i,{class:"right-arrow",image:"arrow-left.png",onClick:e[1]||(e[1]=d=>n("prev")),invert:!1}),_(i,{class:"left-arrow",image:"arrow-right.png",onClick:e[2]||(e[2]=d=>n("next")),invert:!1}),t("div",se,[I(_(k,null,null,512),[[L,m(s)]]),I(t("img",{src:a.link,onLoad:g},null,40,oe),[[L,!m(s)]]),t("div",ie,y(a.description),1)])])}}});const ce=$(le,[["__scopeId","data-v-d34a81b8"]]),B=a=>(H("data-v-5f8c6f47"),a=a(),O(),a),re=B(()=>t("h1",{class:"title"},"\u0413\u0430\u043B\u0435\u0440\u0435\u044F",-1)),ue={class:"images"},de=["onClick"],ve=["src"],me=B(()=>t("div",{class:"image-hover"},null,-1)),ge={class:"loading"},_e={class:"observer"},pe=V({__name:"ImagesView",setup(a){const{goBack:n}=q(),s=u([]),g=u(!1),l=u(""),c=u(!1),o=u(0),e=u(0),i=u(),k=X(()=>R.required(i.value||"")&&!h.value),{fetchFunc:d,isLoading:h}=j({callback:E,alert:!1});ee("isImageLoading",c),b(d);async function E(){const r=await te.getImages(i.value);s.value=[...s.value,...r.data.images],i.value=r.data.pageToken,o.value+=r.data.images.length}function N(){g.value=!1}function S(r){c.value=!0,l.value=s.value[r].link,e.value=r,g.value=!0}async function F(){if(!h.value){if(e.value+1>=o.value&&i.value)await d();else if(e.value+1>=o.value)return;e.value++,c.value=!0,l.value=s.value[e.value].link}}function W(){e.value-1<0||(e.value--,c.value=!0,l.value=s.value[e.value].link)}return(r,fe)=>{const A=f("v-btn"),D=f("LoadingWheel"),M=G("intersection");return v(),p(x,null,[_(A,{class:"home",onClick:m(n)},{default:Z(()=>[Y("\u041D\u0430\u0437\u0430\u0434")]),_:1},8,["onClick"]),g.value?(v(),w(ce,{key:0,link:l.value,total:o.value,current:e.value,onClose:N,onNext:F,onPrev:W},null,8,["link","total","current"])):C("",!0),re,t("div",ue,[(v(!0),p(x,null,z(s.value,(U,T)=>(v(),p("div",{class:"image-block",onClick:ke=>S(T)},[t("img",{src:U.link},null,8,ve),me],8,de))),256))]),t("div",ge,[m(h)?(v(),w(D,{key:0})):C("",!0)]),t("div",_e,[I(t("div",null,null,512),[[M,{f:m(d),canLoad:()=>m(k)}]])])],64)}}});const Ne=$(pe,[["__scopeId","data-v-5f8c6f47"]]);export{Ne as default};
