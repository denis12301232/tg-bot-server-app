import{j,h as M,r as O,E as $,w as R,u as t,a5 as p,U as _,y as s,_ as u,X as i,F as w,$ as f,a7 as Q,a8 as U,W as a,Q as d,a2 as X}from"./@vue.6acdfb34.js";import{b as z,u as G}from"./vue-router.cd563335.js";import{u as H,C,_ as J}from"./index.552cec41.js";import{u as K}from"./useForm.12d3d566.js";import{u as B}from"./useFetching.572bd5af.js";import{A}from"./AssistanceService.0e5e3e8e.js";import{F as P,A as Y}from"./AssistanseFormDto.19b1a3b1.js";import I from"./TheError.7fe7e486.js";import{T as Z}from"./TableAssistance.3137fb36.js";import"./pinia.6b015bcc.js";import"./vue-demi.b3a9cad9.js";import"./vuetify.e3688c29.js";import"./axios.0e4a87d2.js";import"./form-data.2b153385.js";/* empty css             */import"./core-js.40dbafa1.js";const L=n=>(Q("data-v-e66601bc"),n=n(),U(),n),ee={key:1,class:"loader"},te={class:"container"},oe=L(()=>i("h1",{class:"title"},"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u044F\u0432\u043A\u0435",-1)),se={class:"info"},ue={class:"buttons"},ae=L(()=>i("span",null,null,-1)),ie=j({__name:"ListByIdView",setup(n){const v=H(),h=G(),o=z(),b=M(()=>o.params.id),r=K(C.assistance),l=O(o.query.edit==="true"?!0:void 0),{fetchFunc:y,isLoading:S,data:c}=B({callback:async()=>A.getFormById(b.value),alert:!1}),{fetchFunc:D,isLoading:V}=B({callback:x,successMessage:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E"}),q={};$(()=>{y().then(()=>{o.query.edit==="true"&&F()})}),R(o,()=>{o.query.edit==="true"?l.value=!0:l.value=void 0,o.query.edit==="true"&&F()},{deep:!0});function F(){Object.keys(C.assistance).forEach(e=>{e==="phone"?r[e].value=c.value[e].slice(4):r[e].value=c.value[e]})}function T(){return h.push({query:{edit:"true"}})}function g(){return h.push({query:{edit:void 0}})}async function x(){const e=new Y(r);await A.modifyAssistanceForm(e,b.value),await g(),await y()}return(e,E)=>{const N=f("LoadingWheel"),m=f("v-btn"),W=f("v-icon");return t(v).user.email?t(S)?(a(),_("div",ee,[s(N)])):Object.entries(t(c)||{}).length?(a(),_(w,{key:3},[s(m,{class:"home_button",onClick:E[0]||(E[0]=k=>e.$router.push("/"))},{default:u(()=>[d("\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E")]),_:1}),i("div",te,[oe,i("div",se,[l.value?(a(),p(P,{key:1,onSave:t(D),form:t(r),"is-loading":t(V),title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",theme:t(v).currentTheme},{submit:u(k=>[s(m,{type:"submit",disabled:!k.form.valid},{default:u(()=>[d("Ok")]),_:2},1032,["disabled"])]),cancel:u(()=>[s(m,{onClick:X(g,["prevent"])},{default:u(()=>[d("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1},8,["onClick"])]),_:1},8,["onSave","form","is-loading","theme"])):(a(),_(w,{key:0},[i("div",ue,[ae,s(W,{class:"button",tag:"button",onClick:T},{default:u(()=>[d("mdi-pencil")]),_:1})]),s(Z,{form:t(c)||t(q)},null,8,["form"])],64))])])],64)):(a(),p(I,{key:2,code:404,message:"Not Found"})):(a(),p(I,{key:0,code:403,message:"Forbidden"}))}}});const ke=J(ie,[["__scopeId","data-v-e66601bc"]]);export{ke as default};
