System.register(["./index-legacy-96784dc4.js","./TheError-legacy-5f8bc1c0.js","./@vue-legacy-f472956d.js","./useNavigation-legacy-35688046.js","./useFetching-legacy-3d21e8f0.js","./ToolsService-legacy-3e13ae5c.js","./AssistanceService-legacy-695873d4.js","./pinia-legacy-049720e3.js","./vue-demi-legacy-14d04f86.js","./vuetify-legacy-5de5351e.js","./axios-legacy-f3f8b04f.js","./form-data-legacy-e95b16df.js","./vue-router-legacy-1eca3dbd.js","./@mdi-legacy-4c0fdc7d.js","./core-js-legacy-a73dc4e0.js"],(function(e,l){"use strict";var t,a,s,d,i,o,n,c,r,u,v,m,p,h,b,f,_,g,x,y,w,V,k,U,C,I,j,T,S,L,F,K,P,R=document.createElement("style");return R.textContent=".google[data-v-6b80d342]{padding:10px 0}.filter_container>.filter_content[data-v-d439015b]{border:2px solid #738095;box-shadow:inset 0 0 2px rgba(207,215,230,.4);border-radius:5px;padding:5px}.filter_container>.filter_content>.filter_item[data-v-d439015b]{padding:3px 0;display:flex}.filter_container>.filter_content>.filter_item>.item_title[data-v-d439015b]{flex-basis:100px}.filter_container .filter_title[data-v-d439015b]{padding:10px 0}.buttons[data-v-d439015b]{display:flex;padding:10px 0}.sheets_link[data-v-d439015b]{display:inline-block;color:#208f47;text-decoration:none;font-weight:bolder;cursor:pointer}.sheets_link[data-v-d439015b]:visited{color:#208f47}.sheets_link[data-v-d439015b]:hover,.sheets_link[data-v-d439015b]:focus{color:#c4433a}.loader[data-v-1285b9d7]{display:flex;flex-direction:column;align-items:center;width:100%;padding-top:10px}.content[data-v-1285b9d7]{width:100%;padding-top:10px;padding-bottom:5px}.content .search[data-v-1285b9d7]{min-width:250px}.content .user_list[data-v-1285b9d7]{border-spacing:3px;margin-top:5px;background-color:inherit;border-collapse:collapse;border-radius:2px;border-style:hidden;box-shadow:0 0 0 1.5px #738095;width:100%;table-layout:fixed;min-width:250px}.content .user_list td[data-v-1285b9d7],.content .user_list th[data-v-1285b9d7]{border:solid 1px #ccc;padding:10px;border-radius:10px;overflow:auto;word-wrap:break-word}.content .user_list .list_row .row_item[data-v-1285b9d7]{vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles[data-v-1285b9d7]{display:flex;place-items:center}.roles>.role_name[data-v-1285b9d7]{flex-basis:90%;display:block;min-width:50px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles>.role_set[data-v-1285b9d7]{flex-basis:10%;min-width:30px}@media (max-width: 768px){.content[data-v-1285b9d7],.loader[data-v-1285b9d7]{width:100%;margin:0 auto}}.home_button[data-v-af500cc2]{margin:10px 0 0 10px}.tools[data-v-af500cc2]{margin:0 auto;width:90%}.tools .title[data-v-af500cc2]{padding:20px 0}.tools .tools_list[data-v-af500cc2]{padding-bottom:5px;width:50%}.tools .tools_list .list_item .item_title[data-v-af500cc2]{user-select:none}.tools .tools_list .list_item .item_title[data-v-af500cc2]:hover{cursor:pointer;color:teal}.selected[data-v-af500cc2]{color:teal}@media (max-width: 768px){.tools .tools_list[data-v-af500cc2]{width:100%}}\n",document.head.appendChild(R),{setters:[e=>{t=e._,a=e.u,s=e.C},e=>{d=e.default},e=>{i=e.j,o=e.a,n=e.h,c=e.$,r=e.W,u=e.U,v=e.y,m=e.X,p=e._,h=e.Q,b=e.u,f=e.a5,_=e.V,g=e.Z,x=e.a2,y=e.r,w=e.w,V=e.F,k=e.a4,U=e.I,C=e.K,I=e.a7,j=e.a8,T=e.E,S=e.Y},e=>{L=e.u},e=>{F=e.u},e=>{K=e.T},e=>{P=e.A},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const l={class:"google_control"},R={class:"google_message"},A=t(i({__name:"TheToolsGoogle",setup(e){const t=o({serviceUser:"",servicePrivateKey:"",sheetId:"",folderId:"",message:""}),a=n((()=>!(t.serviceUser||t.servicePrivateKey||t.sheetId||t.folderId))),{fetchFunc:s,isLoading:d}=F({callback:async function(){await K.setGoogleServiceAccountSettings(t.serviceUser,t.servicePrivateKey,t.sheetId,t.folderId),t.serviceUser="",t.servicePrivateKey="",t.sheetId="",t.folderId=""},successMessage:"Сохранено"});return(e,i)=>{const o=c("v-text-field"),n=c("v-btn"),y=c("LoadingWheel");return r(),u("form",{class:"google",onSubmit:i[4]||(i[4]=x(((...e)=>b(s)&&b(s)(...e)),["prevent"]))},[v(o,{modelValue:t.serviceUser,"onUpdate:modelValue":i[0]||(i[0]=e=>t.serviceUser=e),variant:"outlined",label:"Service account email"},null,8,["modelValue"]),v(o,{modelValue:t.servicePrivateKey,"onUpdate:modelValue":i[1]||(i[1]=e=>t.servicePrivateKey=e),variant:"outlined",label:"Service account private key"},null,8,["modelValue"]),v(o,{modelValue:t.sheetId,"onUpdate:modelValue":i[2]||(i[2]=e=>t.sheetId=e),variant:"outlined",label:"Sheet ID"},null,8,["modelValue"]),v(o,{modelValue:t.folderId,"onUpdate:modelValue":i[3]||(i[3]=e=>t.folderId=e),variant:"outlined",label:"Folder ID"},null,8,["modelValue"]),m("div",l,[v(n,{type:"submit",disabled:b(a)},{default:p((()=>[h("Сохранить")])),_:1},8,["disabled"]),b(d)?(r(),f(y,{key:0})):_("",!0),m("div",R,g(t.message),1)])],32)}}}),[["__scopeId","data-v-6b80d342"]]),E=e=>(I("data-v-d439015b"),e=e(),j(),e),G={class:"filter_container"},W=E((()=>m("h3",{class:"filter_title"},"Критерии выгрузки",-1))),M={class:"filter_content"},D={class:"item_title"},B={class:"filter"},N=E((()=>m("h4",{class:"filter_title"},"Район",-1))),O={class:"filter"},Q=E((()=>m("h4",{class:"filter_title"},"Год рождения",-1))),X={class:"buttons"},Y=["href"],Z=t(i({__name:"TheToolsSheets",setup(e){const l=a(),t=y([]),d=y([1920,2022]),i=y(""),o=y(null),x=n((()=>!t.value.length||(t.value.includes("district")&&t.value.includes("birth")?T.value||!o.value||!d.value[0]||!d.value[1]:T.value||!o.value&&(!d.value[0]||!d.value[1])))),I=[{name:"По району",value:"district"},{name:"По году",value:"birth"}],{fetchFunc:j,isLoading:T,data:S}=F({callback:async function(){i.value="";const e={district:o.value,birth:{from:d.value[0],to:d.value[1]||9999}};return await P.saveFormsToSheet(e)},successMessage:"Сформировано"});return w(S,(()=>{i.value=S.value?.link||""})),(e,a)=>{const n=c("CCheckbox"),y=c("v-select"),w=c("v-text-field"),S=c("v-range-slider"),L=c("v-btn"),F=c("LoadingWheel");return r(),u("div",G,[W,m("div",M,[(r(),u(V,null,k(I,(e=>m("div",{class:"filter_item",key:e.name},[m("header",D,g(e.name),1),v(n,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),value:e.value,theme:b(l).currentTheme},null,8,["modelValue","value","theme"])]))),64))]),U(m("div",B,[N,v(y,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),label:"Район",items:b(s).districts},null,8,["modelValue","items"])],512),[[C,t.value.includes("district")]]),U(m("div",O,[Q,v(S,{min:"1920",max:"2022",step:"1",modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]=e=>d.value=e)},{prepend:p((()=>[v(w,{modelValue:d.value[0],"onUpdate:modelValue":a[2]||(a[2]=e=>d.value[0]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",density:"compact",style:{width:"85px"}},null,8,["modelValue"])])),append:p((()=>[v(w,{modelValue:d.value[1],"onUpdate:modelValue":a[3]||(a[3]=e=>d.value[1]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",style:{width:"85px"},density:"compact"},null,8,["modelValue"])])),_:1},8,["modelValue"])],512),[[C,t.value.includes("birth")]]),m("div",X,[v(L,{onClick:b(j),disabled:b(x)},{default:p((()=>[h("Сформировать")])),_:1},8,["onClick","disabled"]),b(T)?(r(),f(F,{key:0})):_("",!0)]),i.value?(r(),u("a",{key:0,class:"sheets_link",target:"_blank",href:i.value},"Ссылка на выгруженные заявки",8,Y)):_("",!0)])}}}),[["__scopeId","data-v-d439015b"]]),$=e=>(I("data-v-1285b9d7"),e=e(),j(),e),q={key:0,class:"loader"},z=$((()=>m("span",null,null,-1))),H={key:1,class:"content"},J={class:"user_list"},ee=$((()=>m("tr",{class:"list_header"},[m("th",null,"Имя"),m("th",null,"Е-мэйл"),m("th",null,"Роль")],-1))),le={class:"list_row"},te={class:"row_item"},ae={class:"row_item"},se={class:"roles"},de=$((()=>m("label",{class:"role_name"},"Пользователь",-1))),ie={class:"roles"},oe=$((()=>m("label",{class:"role_name"},"Админ ",-1))),ne=t(i({__name:"TheToolsRoles",setup(e){const l=a(),{fetchFunc:t,data:s,isLoading:d}=F({callback:async()=>K.getUsers(l.user._id),alert:!1}),{fetchFunc:i}=F({callback:async function(e,t){return l.alert.isVisible&&l.showAlert(!1),K.updateRoles(e,t)},successMessage:"Обновлено"}),o=y(""),f=n((()=>s.value?.filter((e=>e.email.toLowerCase().includes(o.value.toLowerCase())||e.name.toLowerCase().includes(o.value.toLowerCase())))));return T(t),(e,t)=>{const a=c("LoadingWheel"),s=c("v-text-field"),n=c("v-tooltip"),_=c("CCheckbox");return b(d)?(r(),u("div",q,[v(a),z])):(r(),u("div",H,[v(s,{label:"Поиск",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),variant:"outlined"},null,8,["modelValue"]),m("table",J,[m("tbody",null,[ee,(r(!0),u(V,null,k(b(f),(e=>(r(),u("tr",le,[m("td",te,[m("span",null,[h(g(e.name),1),v(n,{activator:"parent",location:"bottom"},{default:p((()=>[h(g(e.name),1)])),_:2},1024)])]),m("td",ae,[m("span",null,[h(g(e.email),1),v(n,{activator:"parent",location:"bottom"},{default:p((()=>[h(g(e.email),1)])),_:2},1024)])]),m("td",null,[m("div",se,[v(_,{class:"role_set",value:"user",modelValue:e.roles,"onUpdate:modelValue":l=>e.roles=l,disabled:!0,theme:b(l).currentTheme},null,8,["modelValue","onUpdate:modelValue","theme"]),de]),m("div",ie,[v(_,{class:"role_set",value:"admin",modelValue:e.roles,"onUpdate:modelValue":l=>e.roles=l,onChange:l=>b(i)(e._id,e.roles),theme:b(l).currentTheme},null,8,["modelValue","onUpdate:modelValue","onChange","theme"]),oe])])])))),256))])])]))}}}),[["__scopeId","data-v-1285b9d7"]]),ce={class:"tools"},re=(e=>(I("data-v-af500cc2"),e=e(),j(),e))((()=>m("h1",{class:"title"},"Инструменты",-1))),ue={class:"tools_list"},ve={class:"list_item"},me={class:"list_item"},pe={class:"list_item"},he=t(i({__name:"TheTools",setup(e){const{goBack:l}=L(),t=o({integrate:!1,sheets:!1,adminRights:!1});function a(e){Object.keys(t).forEach((l=>{const a=l;t[a]!==t[e]&&(t[a]=!1)})),t[e]=!t[e]}return(e,s)=>{const d=c("v-btn");return r(),u(V,null,[v(d,{class:"home_button",onClick:b(l)},{default:p((()=>[h("Назад")])),_:1},8,["onClick"]),m("div",ce,[re,m("ul",ue,[m("li",ve,[m("h3",{class:S(["item_title",t.integrate?"selected":""]),onClick:s[0]||(s[0]=e=>a("integrate"))},"Настроить интеграцию с Google",2),U(v(A,null,null,512),[[C,t.integrate]])]),m("li",me,[m("h3",{class:S(["item_title",t.sheets?"selected":""]),onClick:s[1]||(s[1]=e=>a("sheets"))},"Выгрузить заявки в Google Sheets",2),U(v(Z,null,null,512),[[C,t.sheets]])]),m("li",pe,[m("h3",{class:S(["item_title",t.adminRights?"selected":""]),onClick:s[2]||(s[2]=e=>a("adminRights"))},"Настроить роли пользователей",2),t.adminRights?(r(),f(ne,{key:0})):_("",!0)])])])],64)}}}),[["__scopeId","data-v-af500cc2"]]);e("default",i({__name:"ToolsView",setup(e){const l=a();return(e,t)=>b(l).isAdmin?(r(),f(he,{key:1})):(r(),f(d,{key:0,code:403,message:"Forbidden"}))}}))}}}));
