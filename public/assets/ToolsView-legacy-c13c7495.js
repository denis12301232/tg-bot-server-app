System.register(["./index-legacy-39c22bb2.js","./TheError-legacy-8cb894ec.js","./useNavigation-legacy-1fb35f40.js","./useFetching-legacy-78eb828d.js","./ToolsService-legacy-82da2420.js","./AssistanceService-legacy-613f2070.js"],(function(e,l){"use strict";var t,a,s,o,i,d,n,r,c,u,v,m,p,h,b,_,f,g,x,y,w,V,k,U,C,I,T,S,L,F,j,P,K,R=document.createElement("style");return R.textContent=".google[data-v-6b80d342]{padding:10px 0}.filter_container>.filter_content[data-v-d439015b]{border:2px solid #738095;box-shadow:inset 0 0 2px rgba(207,215,230,.4);border-radius:5px;padding:5px}.filter_container>.filter_content>.filter_item[data-v-d439015b]{padding:3px 0;display:flex}.filter_container>.filter_content>.filter_item>.item_title[data-v-d439015b]{flex-basis:100px}.filter_container .filter_title[data-v-d439015b]{padding:10px 0}.buttons[data-v-d439015b]{display:flex;padding:10px 0}.sheets_link[data-v-d439015b]{display:inline-block;color:#208f47;text-decoration:none;font-weight:bolder;cursor:pointer}.sheets_link[data-v-d439015b]:visited{color:#208f47}.sheets_link[data-v-d439015b]:hover,.sheets_link[data-v-d439015b]:focus{color:#c4433a}.loader[data-v-1285b9d7]{display:flex;flex-direction:column;align-items:center;width:100%;padding-top:10px}.content[data-v-1285b9d7]{width:100%;padding-top:10px;padding-bottom:5px}.content .search[data-v-1285b9d7]{min-width:250px}.content .user_list[data-v-1285b9d7]{border-spacing:3px;margin-top:5px;background-color:inherit;border-collapse:collapse;border-radius:2px;border-style:hidden;box-shadow:0 0 0 1.5px #738095;width:100%;table-layout:fixed;min-width:250px}.content .user_list td[data-v-1285b9d7],.content .user_list th[data-v-1285b9d7]{border:solid 1px #ccc;padding:10px;border-radius:10px;overflow:auto;word-wrap:break-word}.content .user_list .list_row .row_item[data-v-1285b9d7]{vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles[data-v-1285b9d7]{display:flex;place-items:center}.roles>.role_name[data-v-1285b9d7]{flex-basis:90%;display:block;min-width:50px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.roles>.role_set[data-v-1285b9d7]{flex-basis:10%;min-width:30px}@media (max-width: 768px){.content[data-v-1285b9d7],.loader[data-v-1285b9d7]{width:100%;margin:0 auto}}.home_button[data-v-af500cc2]{margin:10px 0 0 10px}.tools[data-v-af500cc2]{margin:0 auto;width:90%}.tools .title[data-v-af500cc2]{padding:20px 0}.tools .tools_list[data-v-af500cc2]{padding-bottom:5px;width:50%}.tools .tools_list .list_item .item_title[data-v-af500cc2]{user-select:none}.tools .tools_list .list_item .item_title[data-v-af500cc2]:hover{cursor:pointer;color:teal}.selected[data-v-af500cc2]{color:teal}@media (max-width: 768px){.tools .tools_list[data-v-af500cc2]{width:100%}}\n",document.head.appendChild(R),{setters:[e=>{t=e.d,a=e.k,s=e.m,o=e.r,i=e.o,d=e.c,n=e.e,r=e.g,c=e.w,u=e.h,v=e.b,m=e.n,p=e.f,h=e.z,b=e.p,_=e._,f=e.u,g=e.j,x=e.l,y=e.F,w=e.I,V=e.N,k=e.P,U=e.C,C=e.q,I=e.s,T=e.E,S=e.B},e=>{L=e.default},e=>{F=e.u},e=>{j=e.u},e=>{P=e.T},e=>{K=e.A}],execute:function(){const l={class:"google_control"},R={class:"google_message"},A=_(t({__name:"TheToolsGoogle",setup(e){const t=a({serviceUser:"",servicePrivateKey:"",sheetId:"",folderId:"",message:""}),_=s((()=>!(t.serviceUser||t.servicePrivateKey||t.sheetId||t.folderId))),{fetchFunc:f,isLoading:g}=j({callback:async function(){await P.setGoogleServiceAccountSettings(t.serviceUser,t.servicePrivateKey,t.sheetId,t.folderId),t.serviceUser="",t.servicePrivateKey="",t.sheetId="",t.folderId=""},successMessage:"Сохранено"});return(e,a)=>{const s=o("v-text-field"),x=o("v-btn"),y=o("LoadingWheel");return i(),d("form",{class:"google",onSubmit:a[4]||(a[4]=b(((...e)=>v(f)&&v(f)(...e)),["prevent"]))},[n(s,{modelValue:t.serviceUser,"onUpdate:modelValue":a[0]||(a[0]=e=>t.serviceUser=e),variant:"outlined",label:"Service account email"},null,8,["modelValue"]),n(s,{modelValue:t.servicePrivateKey,"onUpdate:modelValue":a[1]||(a[1]=e=>t.servicePrivateKey=e),variant:"outlined",label:"Service account private key"},null,8,["modelValue"]),n(s,{modelValue:t.sheetId,"onUpdate:modelValue":a[2]||(a[2]=e=>t.sheetId=e),variant:"outlined",label:"Sheet ID"},null,8,["modelValue"]),n(s,{modelValue:t.folderId,"onUpdate:modelValue":a[3]||(a[3]=e=>t.folderId=e),variant:"outlined",label:"Folder ID"},null,8,["modelValue"]),r("div",l,[n(x,{type:"submit",disabled:v(_)},{default:c((()=>[u("Сохранить")])),_:1},8,["disabled"]),v(g)?(i(),m(y,{key:0})):p("",!0),r("div",R,h(t.message),1)])],32)}}}),[["__scopeId","data-v-6b80d342"]]),E=e=>(C("data-v-d439015b"),e=e(),I(),e),G={class:"filter_container"},M=E((()=>r("h3",{class:"filter_title"},"Критерии выгрузки",-1))),W={class:"filter_content"},B={class:"item_title"},D={class:"filter"},N=E((()=>r("h4",{class:"filter_title"},"Район",-1))),q={class:"filter"},z=E((()=>r("h4",{class:"filter_title"},"Год рождения",-1))),O={class:"buttons"},H=["href"],J=_(t({__name:"TheToolsSheets",setup(e){const l=f(),t=g([]),a=g([1920,2022]),b=g(""),_=g(null),C=s((()=>!t.value.length||(t.value.includes("district")&&t.value.includes("birth")?S.value||!_.value||!a.value[0]||!a.value[1]:S.value||!_.value&&(!a.value[0]||!a.value[1])))),I=[{name:"По району",value:"district"},{name:"По году",value:"birth"}],{fetchFunc:T,isLoading:S,data:L}=j({callback:async function(){b.value="";const e={district:_.value,birth:{from:a.value[0],to:a.value[1]||9999}};return await K.saveFormsToSheet(e)},successMessage:"Сформировано"});return x(L,(()=>{b.value=L.value?.link||""})),(e,s)=>{const f=o("CCheckbox"),g=o("v-select"),x=o("v-text-field"),L=o("v-range-slider"),F=o("v-btn"),j=o("LoadingWheel");return i(),d("div",G,[M,r("div",W,[(i(),d(y,null,w(I,(e=>r("div",{class:"filter_item",key:e.name},[r("header",B,h(e.name),1),n(f,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),value:e.value,theme:v(l).currentTheme},null,8,["modelValue","value","theme"])]))),64))]),V(r("div",D,[N,n(g,{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=e=>_.value=e),label:"Район",items:v(U).districts},null,8,["modelValue","items"])],512),[[k,t.value.includes("district")]]),V(r("div",q,[z,n(L,{min:"1920",max:"2022",step:"1",modelValue:a.value,"onUpdate:modelValue":s[4]||(s[4]=e=>a.value=e)},{prepend:c((()=>[n(x,{modelValue:a.value[0],"onUpdate:modelValue":s[2]||(s[2]=e=>a.value[0]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",density:"compact",style:{width:"85px"}},null,8,["modelValue"])])),append:c((()=>[n(x,{modelValue:a.value[1],"onUpdate:modelValue":s[3]||(s[3]=e=>a.value[1]=e),"hide-details":"","single-line":"",type:"number",variant:"outlined",style:{width:"85px"},density:"compact"},null,8,["modelValue"])])),_:1},8,["modelValue"])],512),[[k,t.value.includes("birth")]]),r("div",O,[n(F,{onClick:v(T),disabled:v(C)},{default:c((()=>[u("Сформировать")])),_:1},8,["onClick","disabled"]),v(S)?(i(),m(j,{key:0})):p("",!0)]),b.value?(i(),d("a",{key:0,class:"sheets_link",target:"_blank",href:b.value},"Ссылка на выгруженные заявки",8,H)):p("",!0)])}}}),[["__scopeId","data-v-d439015b"]]),Q=e=>(C("data-v-1285b9d7"),e=e(),I(),e),X={key:0,class:"loader"},Y=Q((()=>r("span",null,null,-1))),Z={key:1,class:"content"},$={class:"user_list"},ee=Q((()=>r("tr",{class:"list_header"},[r("th",null,"Имя"),r("th",null,"Е-мэйл"),r("th",null,"Роль")],-1))),le={class:"list_row"},te={class:"row_item"},ae={class:"row_item"},se={class:"roles"},oe=Q((()=>r("label",{class:"role_name"},"Пользователь",-1))),ie={class:"roles"},de=Q((()=>r("label",{class:"role_name"},"Админ ",-1))),ne=_(t({__name:"TheToolsRoles",setup(e){const l=f(),{fetchFunc:t,data:a,isLoading:m}=j({callback:async()=>P.getUsers(l.user._id),alert:!1}),{fetchFunc:p}=j({callback:async function(e,t){return l.alert.isVisible&&l.showAlert(!1),P.updateRoles(e,t)},successMessage:"Обновлено"}),b=g(""),_=s((()=>a.value?.filter((e=>e.email.toLowerCase().includes(b.value.toLowerCase())||e.name.toLowerCase().includes(b.value.toLowerCase())))));return T(t),(e,t)=>{const a=o("LoadingWheel"),s=o("v-text-field"),f=o("v-tooltip"),g=o("CCheckbox");return v(m)?(i(),d("div",X,[n(a),Y])):(i(),d("div",Z,[n(s,{label:"Поиск",modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),variant:"outlined"},null,8,["modelValue"]),r("table",$,[r("tbody",null,[ee,(i(!0),d(y,null,w(v(_),(e=>(i(),d("tr",le,[r("td",te,[r("span",null,[u(h(e.name),1),n(f,{activator:"parent",location:"bottom"},{default:c((()=>[u(h(e.name),1)])),_:2},1024)])]),r("td",ae,[r("span",null,[u(h(e.email),1),n(f,{activator:"parent",location:"bottom"},{default:c((()=>[u(h(e.email),1)])),_:2},1024)])]),r("td",null,[r("div",se,[n(g,{class:"role_set",value:"user",modelValue:e.roles,"onUpdate:modelValue":l=>e.roles=l,disabled:!0,theme:v(l).currentTheme},null,8,["modelValue","onUpdate:modelValue","theme"]),oe]),r("div",ie,[n(g,{class:"role_set",value:"admin",modelValue:e.roles,"onUpdate:modelValue":l=>e.roles=l,onChange:l=>v(p)(e._id,e.roles),theme:v(l).currentTheme},null,8,["modelValue","onUpdate:modelValue","onChange","theme"]),de])])])))),256))])])]))}}}),[["__scopeId","data-v-1285b9d7"]]),re={class:"tools"},ce=(e=>(C("data-v-af500cc2"),e=e(),I(),e))((()=>r("h1",{class:"title"},"Инструменты",-1))),ue={class:"tools_list"},ve={class:"list_item"},me={class:"list_item"},pe={class:"list_item"},he=_(t({__name:"TheTools",setup(e){const{goBack:l}=F(),t=a({integrate:!1,sheets:!1,adminRights:!1});function s(e){Object.keys(t).forEach((l=>{const a=l;t[a]!==t[e]&&(t[a]=!1)})),t[e]=!t[e]}return(e,a)=>{const h=o("v-btn");return i(),d(y,null,[n(h,{class:"home_button",onClick:v(l)},{default:c((()=>[u("Назад")])),_:1},8,["onClick"]),r("div",re,[ce,r("ul",ue,[r("li",ve,[r("h3",{class:S(["item_title",t.integrate?"selected":""]),onClick:a[0]||(a[0]=e=>s("integrate"))},"Настроить интеграцию с Google",2),V(n(A,null,null,512),[[k,t.integrate]])]),r("li",me,[r("h3",{class:S(["item_title",t.sheets?"selected":""]),onClick:a[1]||(a[1]=e=>s("sheets"))},"Выгрузить заявки в Google Sheets",2),V(n(J,null,null,512),[[k,t.sheets]])]),r("li",pe,[r("h3",{class:S(["item_title",t.adminRights?"selected":""]),onClick:a[2]||(a[2]=e=>s("adminRights"))},"Настроить роли пользователей",2),t.adminRights?(i(),m(ne,{key:0})):p("",!0)])])])],64)}}}),[["__scopeId","data-v-af500cc2"]]);e("default",t({__name:"ToolsView",setup(e){const l=f();return(e,t)=>v(l).isAdmin?(i(),m(he,{key:1})):(i(),m(L,{key:0,code:403,message:"Forbidden"}))}}))}}}));
