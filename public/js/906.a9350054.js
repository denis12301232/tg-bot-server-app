"use strict";(self["webpackChunktg_bot_client_app"]=self["webpackChunktg_bot_client_app"]||[]).push([[906],{906:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var i=t(6252);function s(e,n,t,s,r,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(s["TheHeader"]),(0,i.Wm)(s["HumanInfo"])],64)}var r=t(75),o=t(3577),a=t(9963),u=(0,i.Uk)("Найти"),c=(0,i.Uk)("Редактировать"),l=["data-id"];function f(e,n,t,s,r,f){var d=(0,i.up)("v-input-find"),_=(0,i.up)("v-button"),m=(0,i.up)("v-loading-wheel"),h=(0,i.up)("v-button-edit"),v=(0,i.up)("v-button-confirm"),g=(0,i.up)("v-button-cancel");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:(0,o.C_)(e.$style.container)},[(0,i._)("div",{class:(0,o.C_)(e.$style.search)},[(0,i._)("div",{class:(0,o.C_)(e.$style.search_title)},"Введите ФИО для поиска",2),(0,i.Wm)(d,{class:(0,o.C_)(e.$style.search_input),type:"text",placeholder:"ФИО",modelValue:s.infoStore.fio,"onUpdate:modelValue":n[0]||(n[0]=function(e){return s.infoStore.fio=e}),onKeyup:(0,a.D2)(s.infoStore.findHuman,["enter"])},null,8,["class","modelValue","onKeyup"]),(0,i.Wm)(_,{onClick:s.infoStore.findHuman},{default:(0,i.w5)((function(){return[u]})),_:1},8,["onClick"]),s.infoStore.isListLoading?((0,i.wg)(),(0,i.j4)(m,{key:0})):(0,i.kq)("",!0),(0,i._)("div",{class:(0,o.C_)(e.$style.search_error)},(0,o.zw)(s.infoStore.error),3)],2),s.infoStore.isEditable?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,o.C_)(e.$style.info)},[(0,i._)("div",{class:(0,o.C_)(e.$style.info_finded)},"Всего найдено: "+(0,o.zw)(s.infoStore.finded.length),3),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.infoStore.finded,(function(n,t){return(0,i.wg)(),(0,i.iD)("div",{class:(0,o.C_)(e.$style.info_item),key:n._id},[(0,i._)("div",{class:(0,o.C_)(e.$style.item_about)},[(0,i._)("div",{class:(0,o.C_)(e.$style.item_title)},"Найдено: "+(0,o.zw)(s.infoStore.currentQuery),3),(0,i.Wm)(h,{onClick:function(e){return s.setEditable(e,t,n._id)}},{default:(0,i.w5)((function(){return[c]})),_:2},1032,["onClick"])],2),(0,i._)("table",{class:(0,o.C_)(e.$style.info_table),"data-id":n._id},[(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.form,(function(e,n){return(0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",null,(0,o.zw)(s.Constants.assistance[n].display),1),(0,i._)("td",null,(0,o.zw)(s.useBeautifyValue(e)),1)])})),256))])],10,l)],2)})),128))],2)),[[a.F8,s.infoStore.finded.length]])],2),(0,i.wy)((0,i._)("div",{class:(0,o.C_)(e.$style.form)},[(0,i.Wm)(s["FormAssistance"],{form:s.assistance.form,"is-loading":s.assistance.isLoading,"success-message":s.assistance.successMessage,"error-message":s.assistance.errorMessage,submit:s.submit,title:"Редактировать"},{submit:(0,i.w5)((function(e){return[(0,i.Wm)(v,{type:"submit"})]})),cancel:(0,i.w5)((function(){return[(0,i.Wm)(g,{onClick:s.setEditable})]})),_:1},8,["form","is-loading","success-message","error-message"])],2),[[a.F8,s.infoStore.isEditable]])],64)}var d=t(655),_=t(2262),m=t(6091),h=t(3497),v=t(8262),g=t(6442),b=(0,v.Q_)("info",{state:function(){return{fio:"",error:"",isListLoading:!1,isEditable:!1,finded:[],currentQuery:"",currentScrollY:0}},actions:{findHuman:function(){return(0,d.mG)(this,void 0,Promise,(function(){var e,n,t;return(0,d.Jh)(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,2,3,4]),!this.fio)return[2];if(e=this.fio.trim().split(" "),3!==e.length)throw new Error("Введите ФИО через пробел!");return this.currentQuery=this.fio,this.isListLoading=!0,this.isEditable=!1,this.error="",[4,g.Z.findHuman(e[0],e[1],e[2])];case 1:return n=i.sent(),this.finded=n.data.humansFormList,this.finded.length||(this.error="Ничего не найдено по запросу ".concat(this.fio)),[3,4];case 2:return t=i.sent(),this.error=t.message,[3,4];case 3:return this.isListLoading=!1,[7];case 4:return[2]}}))}))}}});function p(e){return Array.isArray(e)?e.join(","):!0===e?"Да":!1===e?"Нет":e}var w=t(2416),y=t(6834),H=t(2201),S=t(5707),C=(0,i.aZ)({__name:"HumanInfo",setup:function(e,n){var t=this,i=n.expose;i();var s=b(),r=(0,_.iH)(""),o=(0,_.qj)({form:(0,h.c)(m.Z.assistance),errorMessage:"",successMessage:"",isLoading:!1}),a=function(e,n,t){void 0!==n&&t?(s.currentScrollY=window.pageYOffset,s.isEditable=!s.isEditable,window.scrollTo(0,0),r.value=t,Object.keys(m.Z.assistance).forEach((function(e){o.form[e].value="phone"===e?s.finded[n].form[e].slice(4):s.finded[n].form[e]}))):(s.isEditable=!s.isEditable,window.scrollTo(0,s.currentScrollY))},u=function(){return(0,d.mG)(t,void 0,Promise,(function(){var e,n,t,i;return(0,d.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),o.isLoading=!0,e=new S.Z(o.form),[4,g.Z.modifyAssistanceForm(e,r.value)];case 1:return s.sent(),o.successMessage="Сохранено!",setTimeout((function(){return o.successMessage=""}),2e3),[3,4];case 2:return n=s.sent(),o.errorMessage=null===(i=null===(t=null===n||void 0===n?void 0:n.response)||void 0===t?void 0:t.data)||void 0===i?void 0:i.message,setTimeout((function(){return o.errorMessage=""}),2e3),[3,4];case 3:return o.isLoading=!1,[7];case 4:return[2]}}))}))};(0,H.iS)((function(e,n,t){s.isEditable=!1,t()}));var c={infoStore:s,currentId:r,assistance:o,setEditable:a,submit:u,ref:_.iH,reactive:_.qj,Constants:m.Z,useForm:h.c,useInfoStore:b,useBeautifyValue:p,AssistanceFormValidators:w.R$,FormAssistance:y.Z,onBeforeRouteLeave:H.iS,AssistanseFormDto:S.Z,AssistanceService:g.Z};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),I={container:"HumanInfo_container_IO18v",search:"HumanInfo_search_gdZA2",search_title:"HumanInfo_search_title_YgvH0",search_input:"HumanInfo_search_input_ItC42",search_error:"HumanInfo_search_error_QnF_X",info:"HumanInfo_info__GZr1",info_finded:"HumanInfo_info_finded_Qwgux",info_item:"HumanInfo_info_item_wzl2I",item_about:"HumanInfo_item_about_sCFRM",info_table:"HumanInfo_info_table_wJUHz",form:"HumanInfo_form_Fqv2f"},k=t(3744);const Z={};Z["$style"]=I;const E=(0,k.Z)(C,[["render",f],["__cssModules",Z]]);var L=E,$=(0,i.aZ)({__name:"InfoView",setup:function(e,n){var t=n.expose;t();var i={TheHeader:r.Z,HumanInfo:L};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});const F=(0,k.Z)($,[["render",s]]);var M=F}}]);
//# sourceMappingURL=906.a9350054.js.map