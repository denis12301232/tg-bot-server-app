"use strict";(self["webpackChunktg_bot_client_app"]=self["webpackChunktg_bot_client_app"]||[]).push([[882],{1882:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var a={};t.r(a);var i=t(6252),r=function(e){return(0,i.dD)("data-v-62776034"),e=e(),(0,i.Cn)(),e},u=(0,i.Uk)("На главную"),l=r((function(){return(0,i._)("h1",{class:"title"},"Галерея",-1)})),o={class:"images"},s=["onClick"],c=["src"],g=r((function(){return(0,i._)("div",{class:"image-hover"},null,-1)})),v={class:"loading"},m={class:"observer"};function d(e,n,t,a,r,d){var f=(0,i.up)("VButton"),p=(0,i.up)("LoadingWheel"),w=(0,i.Q2)("intersection");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(f,{class:"home",onClick:n[0]||(n[0]=function(n){return e.$router.push("/")})},{default:(0,i.w5)((function(){return[u]})),_:1}),(0,i.Wm)(a["AlertModal"],{class:"alert",message:a.store.alert.message,onShow:a.store.showAlert,"is-visible":a.store.alert.isVisible,type:a.store.alert.type},null,8,["message","onShow","is-visible","type"]),a.isVisible?((0,i.wg)(),(0,i.j4)(a["ImageModal"],{key:0,link:a.link,total:a.total,current:a.current,onClose:a.close,onNext:a.nextImage,onPrev:a.prevImage},null,8,["link","total","current"])):(0,i.kq)("",!0),l,(0,i._)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.images,(function(e,n){return(0,i.wg)(),(0,i.iD)("div",{class:"image-block",onClick:function(e){return a.openImage(n)}},[(0,i._)("img",{src:e.link},null,8,c),g],8,s)})),256))]),(0,i._)("div",v,[a.isLoading?((0,i.wg)(),(0,i.j4)(p,{key:0})):(0,i.kq)("",!0)]),(0,i._)("div",m,[(0,i.wy)((0,i._)("div",null,null,512),[[w,{f:a.getImages,canLoad:function(){return a.canLoad}}]])])],64)}var f=t(655),p=t(2262),w=t(9669),k=t.n(w),_=t(6091),b=function(){function e(){}return Object.defineProperty(e,"getImages",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return k().get("".concat(_.Z.API_URL,"/images/"),{params:{pageToken:e}})}}),e}(),h=b,I=t(9963),y=t(3577),L={class:"image-count"},H={class:"modal-content"},C=["src"],S={class:"image-description"};function x(e,n,t,a,r,u){var l=(0,i.up)("ButtonImage"),o=(0,i.up)("LoadingWheel"),s=(0,i.Q2)("focus");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"image-modal",onKeyup:n[3]||(n[3]=(0,I.D2)((function(e){return a.emit("close")}),["esc"])),tabindex:"0",onKeydown:n[4]||(n[4]=function(e){return a.changeImage(e)})},[(0,i._)("div",L,(0,y.zw)(t.current+1+"/"+t.total),1),(0,i.Wm)(l,{class:"close-window",image:"images/close.png",onClick:n[0]||(n[0]=function(e){return a.emit("close")}),invert:!1}),(0,i.Wm)(l,{class:"right-arrow",image:"images/arrow-left.png",onClick:n[1]||(n[1]=function(e){return a.emit("prev")}),invert:!1}),(0,i.Wm)(l,{class:"left-arrow",image:"images/arrow-right.png",onClick:n[2]||(n[2]=function(e){return a.emit("next")}),invert:!1}),(0,i._)("div",H,[(0,i.wy)((0,i.Wm)(o,null,null,512),[[I.F8,a.isImageLoading]]),(0,i.wy)((0,i._)("img",{src:t.link,onLoad:a.setLoading},null,40,C),[[I.F8,!a.isImageLoading]]),(0,i._)("div",S,(0,y.zw)(t.description),1)])],32)),[[s]])}var A=(0,i.aZ)({__name:"ImageModal",props:{link:{type:String,required:!0},description:{type:String,default:""},current:{type:Number,default:0},total:{type:Number,default:0}},emits:["close","prev","next"],setup:function(e,n){var t=n.expose,r=n.emit;t();var u=(0,i.f3)("isImageLoading");function l(){u.value=!1}function o(e){"ArrowLeft"===e.key?r("prev"):"ArrowRight"===e.key&&r("next")}var s={isImageLoading:u,emit:r,setLoading:l,changeImage:o,inject:i.f3,Ref:a.Ref};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),W=t(3744);const j=(0,W.Z)(A,[["render",x],["__scopeId","data-v-5a960bba"]]);var D=j,J=t(4402),M=t(7224),Z=(0,i.aZ)({__name:"ImagesView",setup:function(e,n){var t=n.expose;t();var a=(0,J.o)(),r=(0,p.iH)([]),u=(0,p.iH)(!1),l=(0,p.iH)(""),o=(0,p.iH)(!1),s=(0,p.iH)(0),c=(0,p.iH)(0),g=(0,p.iH)(!1),v=(0,p.iH)(void 0),m=(0,i.Fl)((function(){return"string"===typeof v.value&&!g.value}));function d(){return(0,f.mG)(this,void 0,void 0,(function(){var e,n;return(0,f.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),g.value=!0,[4,h.getImages(v.value)];case 1:return e=t.sent(),r.value=(0,f.ev)((0,f.ev)([],r.value,!0),e.data.images,!0),v.value=e.data.pageToken,s.value+=e.data.images.length,[3,4];case 2:return n=t.sent(),a.setAlert("error",n.message),a.showAlert(),[3,4];case 3:return g.value=!1,[7];case 4:return[2]}}))}))}function w(){u.value=!1}function k(e){o.value=!0,l.value=r.value[e].link,c.value=e,u.value=!0}function _(){return(0,f.mG)(this,void 0,void 0,(function(){return(0,f.Jh)(this,(function(e){switch(e.label){case 0:return g.value?[2]:[3,1];case 1:return c.value+1>=s.value&&v.value?[4,d()]:[3,3];case 2:return e.sent(),[3,4];case 3:if(c.value+1>=s.value)return[2];e.label=4;case 4:return c.value++,o.value=!0,l.value=r.value[c.value].link,[2]}}))}))}function b(){c.value-1<0||(c.value--,o.value=!0,l.value=r.value[c.value].link)}(0,i.JJ)("isImageLoading",o),(0,i.bv)(d);var I={store:a,images:r,isVisible:u,link:l,isImageLoading:o,total:s,current:c,isLoading:g,pageToken:v,canLoad:m,getImages:d,close:w,openImage:k,nextImage:_,prevImage:b,ref:p.iH,onMounted:i.bv,provide:i.JJ,computed:i.Fl,ImagesService:h,ImageModal:D,useStore:J.o,AlertModal:M.Z};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}});const P=(0,W.Z)(Z,[["render",d],["__scopeId","data-v-62776034"]]);var V=P}}]);
//# sourceMappingURL=882.1dc82460.js.map