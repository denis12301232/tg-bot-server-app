"use strict";(self["webpackChunktg_bot_client_app"]=self["webpackChunktg_bot_client_app"]||[]).push([[951],{6951:function(e,n,a){a.r(n),a.d(n,{default:function(){return F}});var t={};a.r(t);var i=a(6252),r=a(3577),u=function(e){return(0,i.dD)("data-v-26bf4b73"),e=e(),(0,i.Cn)(),e},o=(0,i.Uk)("На главную"),l=u((function(){return(0,i._)("h1",{class:"title"},"Фото",-1)})),c={class:"images"},s=["onClick"],g=["src"],v=u((function(){return(0,i._)("div",{class:"image-hover"},null,-1)})),m={key:1,class:"error"},d={class:"loading"},f={class:"observer"};function p(e,n,a,t,u,p){var k=(0,i.up)("VButton"),_=(0,i.up)("LoadingWheel"),w=(0,i.Q2)("intersection");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(k,{class:"home",onClick:n[0]||(n[0]=function(n){return e.$router.push("/")})},{default:(0,i.w5)((function(){return[o]})),_:1}),t.isVisible?((0,i.wg)(),(0,i.j4)(t["ImageModal"],{key:0,link:t.link,total:t.total,current:t.current,onClose:t.close,onNext:t.nextImage,onPrev:t.prevImage},null,8,["link","total","current"])):(0,i.kq)("",!0),l,(0,i._)("div",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.images,(function(e,n){return(0,i.wg)(),(0,i.iD)("div",{class:"image-block",onClick:function(e){return t.openImage(n)}},[(0,i._)("img",{src:e.link},null,8,g),v],8,s)})),256))]),t.errorMessage?((0,i.wg)(),(0,i.iD)("div",m,(0,r.zw)(t.errorMessage),1)):(0,i.kq)("",!0),(0,i._)("div",d,[t.isLoading?((0,i.wg)(),(0,i.j4)(_,{key:0})):(0,i.kq)("",!0)]),(0,i._)("div",f,[(0,i.wy)((0,i._)("div",null,null,512),[[w,{f:t.getImages,canLoad:function(){return t.canLoad}}]])])],64)}var k=a(655),_=a(2262),w=a(9669),b=a.n(w),I=a(6091),y=function(){function e(){}return Object.defineProperty(e,"getImages",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return b().get("".concat(I.Z.API_URL,"/images/"),{params:{pageToken:e}})}}),e}(),L=y,h=a(9963),H={class:"image-count"},C={class:"modal-content"},x=["src"],D={class:"image-description"};function M(e,n,a,t,u,o){var l=(0,i.up)("ButtonImage"),c=(0,i.up)("LoadingWheel"),s=(0,i.Q2)("focus");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"image-modal",onKeyup:n[3]||(n[3]=(0,h.D2)((function(e){return t.emit("close")}),["esc"])),tabindex:"0",onKeydown:n[4]||(n[4]=function(e){return t.changeImage(e)})},[(0,i._)("div",H,(0,r.zw)(a.current+1+"/"+a.total),1),(0,i.Wm)(l,{class:"close-window",image:"images/close.png",onClick:n[0]||(n[0]=function(e){return t.emit("close")}),invert:!1}),(0,i.Wm)(l,{class:"right-arrow",image:"images/arrow-left.png",onClick:n[1]||(n[1]=function(e){return t.emit("prev")}),invert:!1}),(0,i.Wm)(l,{class:"left-arrow",image:"images/arrow-right.png",onClick:n[2]||(n[2]=function(e){return t.emit("next")}),invert:!1}),(0,i._)("div",C,[(0,i.wy)((0,i.Wm)(c,null,null,512),[[h.F8,t.isImageLoading]]),(0,i.wy)((0,i._)("img",{src:a.link,onLoad:t.setLoading},null,40,x),[[h.F8,!t.isImageLoading]]),(0,i._)("div",D,(0,r.zw)(a.description),1)])],32)),[[s]])}var S=(0,i.aZ)({__name:"ImageModal",props:{link:{type:String,required:!0},description:{type:String,default:""},current:{type:Number,default:0},total:{type:Number,default:0}},emits:["close","prev","next"],setup:function(e,n){var a=n.expose,r=n.emit;a();var u=(0,i.f3)("isImageLoading");function o(){u.value=!1}function l(e){"ArrowLeft"===e.key?r("prev"):"ArrowRight"===e.key&&r("next")}var c={isImageLoading:u,emit:r,setLoading:o,changeImage:l,inject:i.f3,Ref:t.Ref};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),W=a(3744);const j=(0,W.Z)(S,[["render",M],["__scopeId","data-v-5a960bba"]]);var P=j,Z=(0,i.aZ)({__name:"ImagesView",setup:function(e,n){var a=n.expose;a();var t=(0,_.iH)([]),r=(0,_.iH)(!1),u=(0,_.iH)(""),o=(0,_.iH)(!1),l=(0,_.iH)(0),c=(0,_.iH)(0),s=(0,_.iH)(!1),g=(0,_.iH)(void 0),v=(0,_.iH)(""),m=(0,_.Fl)((function(){return"string"===typeof g.value&&!s.value}));function d(){s.value=!0,v.value="",L.getImages(g.value).then((function(e){t.value=(0,k.ev)((0,k.ev)([],t.value,!0),e.data.images,!0),g.value=e.data.pageToken,l.value+=e.data.images.length})).catch((function(e){return v.value=e.message})).finally((function(){return s.value=!1}))}function f(){r.value=!1}function p(e){o.value=!0,u.value=t.value[e].link,c.value=e,r.value=!0}function w(){c.value+1>=l.value||(c.value++,o.value=!0,u.value=t.value[c.value].link)}function b(){c.value-1<0||(c.value--,o.value=!0,u.value=t.value[c.value].link)}(0,i.JJ)("isImageLoading",o),(0,i.bv)(d);var I={images:t,isVisible:r,link:u,isImageLoading:o,total:l,current:c,isLoading:s,pageToken:g,errorMessage:v,canLoad:m,getImages:d,close:f,openImage:p,nextImage:w,prevImage:b,ref:_.iH,onMounted:i.bv,provide:i.JJ,ImagesService:L,ImageModal:P,computed:_.Fl};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}});const q=(0,W.Z)(Z,[["render",p],["__scopeId","data-v-26bf4b73"]]);var F=q}}]);
//# sourceMappingURL=951.30320314.js.map